<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html tal:omit-tag=""
  lang="en"
  xml:lang="en"
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:notal="http://www.infrae.com/silva/notal"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  tal:define="
    global vein string:preview;"
  i18n:domain="silva">

<metal:block metal:use-macro="here/macro_index/macros/master">

<metal:block metal:fill-slot="middleground">
  <div class="middleground"
    tal:define="active python: editor == 'kupu'">
    <a class="wide"
      title="see the content in the public layout: alt-;"
      accesskey=";"
      tal:attributes="href string:${model/absolute_url}/preview_html"
      i18n:translate=""
      i18n:attributes="title;accesskey public_preview_accesskey">
      public&nbsp;preview...
    </a>
    <tal:block define="
      permissions view/get_silva_permissions;
      unapproved_version model/get_unapproved_version | nothing;
      have_approve_permission permissions/ApproveSilvaContent | nothing;
    ">
      <a title="publish this document: alt-p"
        accesskey="p"
        class="executor"
        tal:attributes="href string:${model/absolute_url}/edit/tab_edit_publish"
        i18n:translate=""
        i18n:attributes="title;accesskey open_to_public_accesskey"
        tal:condition="python: unapproved_version and have_approve_permission">
        publish&nbsp;now
      </a>
    </tal:block>
  </div>
</metal:block>

<metal:block fill-slot="main" tal:omit-tag="">
  <span tal:replace="nothing"> _______ closed message _______ </span>
  <div class="feedback" style="width:70%;" tal:condition="here/tab_preview_needs_feedback">
    <strong class="warning" i18n:translate="">This is a closed version. You see it, but the public won't!</strong>
  </div>

  <span tal:replace="nothing"> _______ content area, here the XML is rendered in HTML _______ </span>
<style type="text/css">
.public {
  margin-left : 1.5em;
  padding-top : 0.3em;
}
</style>

  <div class="public"
    tal:content="structure model/preview">
    <!-- this text is replaced by Silva content -->
  </div>
  <br />

</metal:block>
</metal:block>

</html>
