<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html tal:omit-tag=""
  lang="en"
  xml:lang="en"
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:notal="http://www.infrae.com/silva/notal"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  tal:define="global vein string:preview"
  i18n:domain="silva">

<metal:block use-macro="here/macro_index/macros/master">

<metal:block fill-slot="frontend">
<link rel="stylesheet"
  type="text/css"
  tal:attributes="href here/frontend.css/absolute_url | nothing"
/>
</metal:block>

<metal:block fill-slot="style">
<style type="text/css">
body {
  /* reassert background */
  background-color: #91989b;
}
div.public {
  margin-left: 0;
  padding-top: 0;
}
h2 {
  margin-top: 0.3em;
}
</style>

<!-- override for specific css/js inclusion in the head -->
<link tal:replace="structure here/head_inject|nothing"/>

</metal:block>

<metal:block metal:fill-slot="middleground">
  <div class="middleground"
    tal:define="active python: editor == 'kupu'">
    <a class="wide"
      title="see the content in the public layout: alt-;"
      accesskey=";"
      tal:attributes="href string:${model/absolute_url}/preview_html"
      i18n:translate=""
      i18n:attributes="title">
      public&nbsp;preview...
    </a>
    <tal:block define="
      permissions             view/get_silva_permissions;
      unapproved_version      model/get_unapproved_version | nothing;
      have_approve_permission permissions/ApproveSilvaContent | nothing;
    ">
      <a class="executor"
        style="float:right"
        title="publish this document: alt-p"
        accesskey="p"
        tal:attributes="href string:${model/absolute_url}/edit/tab_preview_publish"
        i18n:translate=""
        i18n:attributes="title"
        tal:condition="python: unapproved_version and have_approve_permission">
        publish&nbsp;now
      </a>
    </tal:block>
  </div>
</metal:block>

<metal:block fill-slot="main"
  tal:define="nottext python:model.meta_type == 'Silva Image'">
  <table class="columns columns3">
    <tbody>
      <tr>
        <tal:block replace="nothing">
          _____________________ sidebar _____________________
        </tal:block>
        <td class="left">
          <metal:block use-macro="view/macro_vein_navigation/macros/vein">
            <metal:fill-slot fill-slot="sidebar">
              <tal:block replace="structure python: view.service_sidebar.render(model, 'tab_preview', vein)" />
            </metal:fill-slot>
          </metal:block>
        </td>
        <tal:block replace="nothing">
          _____________________ main _____________________
        </tal:block>
        <td class="main">
        <tal:block replace="nothing">
          ______________ content area, here the XML is rendered in HTML ______________ 
        </tal:block>
          <div class="preview"
            tal:omit-tag="nottext">
            <div class="public"
              tal:content="structure model/preview">
              <!-- this text is replaced by Silva content -->
            </div>
          </div>
        </td>
        <td class="right">
          <span tal:replace="nothing"> _______ closed notice _______ </span>
          <div class="feedback" style="padding-bottom:0.5em;" 
            tal:condition="here/tab_preview_needs_feedback">
            <strong class="warning" i18n:translate="">This is a closed version. You see it, but the public won't!</strong>
          </div>
        </td>
      </tr>
    </tbody>
  </table>
</metal:block>

</metal:block>
</html>
