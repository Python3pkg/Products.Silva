<tal:block define="
  global active_tab string:tab_access;
  global breadcrumb_vein string:Emails;
  " />
<html metal:use-macro="here/macro_index/macros/master">
<div class="margins" metal:fill-slot="main">
<p class="halfline">&nbsp;</p>

<h3><a href="tab_access" title="Up to top of Access tab">Access
  <img tal:attributes="src string:${silva_root}/globals/up_gray.gif" width="16" height="11" border="0" alt="Up to top of Access tab" /></a></h3>
<h2 class="worksheet">
  Authorized users below this level
</h2>
<div class="worksheet">
<tal:check
   condition="python:request.AUTHENTICATED_USER.has_permission('Change Silva access', model)">
<tal:trigger
   define="dummy python:model.security_trigger()" />
<form action="." method="POST">
<table width="100%" cellspacing="0" cellpadding="3" border="0">
  <tr>
    <th colspan="2" align="left">
      <span class="tablehead4">Email addresses</span>
    </th>
  </tr>
  <tr>
    <td class="focus">
      Addresses are formatted for copying and pasting in the &#8216;To:&#8217; field of a message.<br />
      <span class="textarea">
        <textarea name="data" cols="65" rows="5" wrap="soft"><tal:loop 
           repeat="userid model/sec_get_userids_deep"><tal:if_email 
           define="member python:model.sec_get_member(userid)" condition="member/email/strip | nothing"><tal:block replace="member/email">userid</tal:block><tal:if condition="not:repeat/userid/end">, </tal:if></tal:if_email></tal:loop></textarea>
      </span>
    </td>
  </tr>
  <tr class="controls">
    <td>
      <input class="cancelbutton" type="submit" name="tab_access:method" value="Cancel" title="Cancel - ctrl-c" accesskey="c" />
    </td>
  </tr>
</table>
</form>

</tal:check>
</div>
</div>
</html>
