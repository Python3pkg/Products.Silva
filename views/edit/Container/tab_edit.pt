<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html tal:omit-tag=""
  lang="en"
  xml:lang="en"
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:notal="http://www.infrae.com/silva/notal"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  tal:define="global breadcrumb_vein string:Contents;">

<metal:block use-macro="here/macro_index/macros/master">
<metal:block fill-slot="main"
  tal:define="
    default_document model/get_default;
    default_doc_list python: test(default_document, [default_document], []);
    publishables python: default_doc_list + model.get_ordered_publishables();
    assets model/get_assets;">

  <form action="."
    method="POST"
    name="silvaObjects">

    <table class="columns columns2">
      <tbody>
        <tr>
          <td class="left">
            <tal:block replace="nothing">
              _____________________ sidebar subtable _____________________
            </tal:block>
            <span tal:replace="structure python: view.service_sidebar.render(model, 'tab_edit', breadcrumb_vein)" />
          </td>
          <td class="main">

            <tal:block replace="nothing">
              _____________________ inner table with folder view _____________________
            </tal:block>
            <table class="listing"
              id="sortable">
              <thead>
                <tal:block replace="nothing">
                  ______________ vein + title row ______________
                </tal:block>
                <tr>
                  <td class="top"
                    colspan="6">
                    <h2 tal:attributes="title string:id: ${model/id}">
                      <img tal:replace="structure python:view.render_icon(model)" />
                      <span tal:replace="structure string:${title}">id</span>
                    </h2>
                  </td>
                </tr>

                <tal:block replace="nothing">
                  ______________ top controls row ______________
                </tal:block>
                <tr class="top-controls">
                  <td colspan="6">
                    <div style="float: left; margin-left:0.2em; padding:0 0px 0 2px;">
                    <input class="navigation"
                      name="add_object:method"
                      type="submit"
                      value=" New..."
                      title="add a new item - alt-n"
                      accesskey="n"
                      tal:attributes="onClick string:location.href='${url}/edit/add_object?meta_type='+this.form.meta_type.options[this.form.meta_type.selectedIndex].value" />
                    <label for="meta_type" title="access key: alt-s" accesskey="s">
                    </label>
                    <select class="navigation"
                      name="meta_type"
                      title="select a new item - alt-s"
                      tal:attributes="onChange string:location.href='${url}/edit/add_object?meta_type='+this.options[this.selectedIndex].value">
                      <option value="None">
                        select:
                      </option>
                      <tal:block tal:repeat="addable model/get_silva_addables">
                        <option tal:condition="python:here.service_view_registry.has_view('add', addable['name'])"
                          tal:content="addable/name"
                          tal:attributes="value addable/name" />
                      </tal:block>
                    </select>
                    </div>
                    <a class="navigation"
                      style="float: right;"
                      href="tab_edit_import"
                      title="import XML data - alt-i"
                      accesskey="i"
                      >
                      Import...
                    </a>

                  </td>
                </tr>
              </thead>

              <tbody>
                <tal:block replace="nothing">
                  ______________ listing header ______________
                </tal:block>
                <tr tal:condition="python:(default_document or publishables or assets)">
                  <th class="listing-right">
                    #&nbsp;
                  </th>
                  <th>
                    Edit
                  </th>
                  <th>
                    Preview
                  </th>
                  <th>
                    Modified&nbsp;date
                  </th>
                  <th>
                    Author
                  </th>
                  <th class="nosort listing-right">
                    &nbsp;&nbsp;Shift
                  </th>
                </tr>

                <tal:block replace="nothing">
                  ______________ if no publishables in this folder ______________
                </tal:block>
                <tr class="focus"
                  tal:condition="python: not(default_document or publishables or assets)">
                  <td colspan="6">
                    There are no content objects in this folder.
                  </td>
                </tr>

                <tal:block replace="nothing">
                  ______________ default + publishables ______________
                </tal:block>
                <tal:block
                  repeat="item publishables">
                  <tal:block define="
                    is_default python: item.id == 'index';
                    item_url item/absolute_url;
                    oddrow repeat/item/odd">
                    <tr tal:attributes="class python:oddrow and 'even' or 'odd'">
                      <tal:block replace="nothing">
                        _______ checkbox + position cell _______
                      </tal:block>
                      <td class="listing-left">
                        <input name="ids:list"
                          type="checkbox"
                          value="value"
                          tal:attributes="
                            value item/id;
                            id item/id;"
                        />
                        <label tal:content="repeat/item/index"
                          tal:attributes="for item/id">
                          #
                        </label>
                      </td>
                      <tal:block replace="nothing">
                        _______ id cell _______
                      </tal:block>
                      <td>
                        <a class="image"
                          tal:attributes="
                            href python:here.get_editor_link(item);
                            title item/meta_type;">
                          <img tal:replace="structure python:view.render_icon(item)" />
                        </a>
                        <a class="blacklink"
                          title="edit"
                          tal:content="item/id"
                          tal:attributes="
                            href python:here.get_editor_link(item);">
                          id
                        </a>
                        <img alt="content approved or published"
                          border="0"
                          height="10"
                          title="content is approved or published"
                          width="10"
                          tal:define="
                            is_published item/is_version_published | nothing;
                            is_approved item/is_version_approved | nothing"
                          tal:condition="python:is_published or is_approved"
                          tal:attributes="src string:${root_url}/globals/checkmark.gif" />

                      </td>
                      <tal:block replace="nothing">
                        _______ title cell _______
                      </tal:block>
                      <td>
                        <a class="blacklink"
                          title="preview"
                          tal:attributes="
                            href string:${item_url}/edit/tab_preview;
                            class python:item.get_object_status()[1];"
                          tal:define="title python:(item.get_title_html() or default)"
                          tal:content="structure title">
                          <i>no title</i>
                        </a>
                      </td>
                      <tal:block replace="nothing">
                        _______ modified date/metadata downlink cell _______
                      </tal:block>
                      <td tal:define="modification_time item/get_modification_datetime | nothing">
                        <a class="blacklink" title="metadata"
                          tal:condition="modification_time"
                          tal:attributes="href string:${item_url}/edit/tab_metadata"
                          tal:content="structure python:here.service_utils.backend_short_datetime_to_str(modification_time);">
                          date
                        </a>
                        <a class="closed" title="settings"
                          tal:condition="not:modification_time"
                          tal:attributes="href string:${item_url}/edit/tab_metadata">
                          n/a
                        </a>
                      </td>
                      <tal:block replace="nothing">
                        _______ author/status downlink cell _______
                      </tal:block>
                      <td tal:define="last_author python:(item.sec_get_last_author_info().fullname() or default)">
                        <a class="blacklink" title="status"
                          tal:condition="python:not item.implements_container() and item.implements_versioned_content()"
                          tal:attributes="href string:${item_url}/edit/tab_status"
                          tal:content="structure last_author">
                          authorname
                        </a>
                        <a class="closed" title="publish"
                          tal:condition="python:item.implements_container()"
                          tal:attributes="href string:${item_url}/edit/tab_status">
                          n/a
                        </a>
                        <span 
                          tal:condition="python:item.implements_content() and not item.implements_versioned_content()"
                          tal:replace="last_author">
                          authorname
                        </span>
                      </td>
                      <tal:block replace="nothing">
                        _______ move symbols _______
                      </tal:block>
                      <td class="listing-right">
                        <tal:block condition="python:may_change_content and not is_default">
                          <a class="image"
                            title="move down"
                            tal:attributes="href string:${url}/edit/tab_edit_move_down?id=${item/id}">
                            <img alt="Move down"
                              border="0"
                              height="12"
                              width="16"
                              tal:attributes="src string:${root_url}/globals/down.gif" />
                          </a>
                          <a class="image"
                            title="move up"
                            tal:attributes="href string:${url}/edit/tab_edit_move_up?id=${item/id}">
                            <img alt="Move up"
                              border="0"
                              height="12"
                              width="16"
                              tal:attributes="src string:${root_url}/globals/up.gif" />
                          </a>
                        </tal:block>
                      </td>
                    </tr>
                  </tal:block>
                </tal:block>

                <tal:block replace="nothing">
                  ______________ assets ______________
                </tal:block>
                <tal:block 
                  condition="python:len(assets)"
                  repeat="asset assets">

                  <tal:block define="
                    asset_url asset/absolute_url;
                    oddrow repeat/asset/odd">
                    <tr 
                      tal:define="title python:(asset.get_title_html())"
                      tal:attributes="class python:oddrow and 'odd' or 'even'">
                      <tal:block replace="nothing">
                        _______ checkbox + position cell _______
                      </tal:block>
                      <td class="listing-left">
                        <input name="ids:list"
                          type="checkbox"
                          value="value"
                          tal:attributes="value asset/id" />
                        &#8211;
                      </td>
                      <tal:block replace="nothing">
                        _______ icon + id cell _______
                      </tal:block>
                      <td>
                        <a class="image"
                          tal:attributes="
                            href string:${asset_url}/edit/tab_edit;
                            title asset/meta_type;">
                          <img tal:replace="structure python:view.render_icon(asset)" />
                        </a>
                        <a class="blacklink"
                          href="asset"
                          title="edit"
                          tal:attributes="href string:${asset_url}/edit/tab_edit"
                          tal:content="structure asset/get_title_or_id">
                          edit
                        </a>
                      </td>
                      <tal:block replace="nothing">
                        _______ title cell _______
                      </tal:block>
                      <td>
                        <a class="blacklink"
                          title="preview"
                          tal:condition="python: title != ''"
                          tal:content="structure asset/id"
                          tal:attributes="href string:${asset_url}/edit/tab_preview">
                          preview
                        </a>
                        <a class="blacklink"
                          title="preview"
                          tal:condition="python: title == ''"
                          tal:attributes="href string:${asset_url}/edit/tab_preview">
                          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        </a>
                      </td>
                      <tal:block replace="nothing">
                        _______ modified date cell _______
                      </tal:block>
                      <td tal:define="modification_time asset/get_modification_datetime | nothing">
                        <tal:block
                          condition="modification_time"
                          content="structure python:here.service_utils.backend_short_datetime_to_str(modification_time);">
                        </tal:block>
                        <tal:block condition="not:modification_time">
                          <i>
                            unknown
                          </i>
                        </tal:block>
                      </td>
                      <tal:block replace="nothing">
                        _______ author cell _______
                      </tal:block>
                      <td tal:content="structure last_author"
                        tal:define="last_author python:(asset.sec_get_last_author_info().fullname() or default)">
                        unknown
                      </td>
                      <tal:block replace="nothing">
                        _______ move symbols (none) _______
                      </tal:block>
                      <td>
                        &nbsp;
                      </td>
                    </tr>
                  </tal:block>
                </tal:block>
              </tbody>

              <tfoot>
                <tal:block replace="nothing">
                  ______________ select all row ______________
                </tal:block>
                <tr tal:condition="python:(default_document or publishables or assets)">
                  <th class="controls listing-left"
                    colspan="6">
                    <metal:block use-macro="view/macro_select_all/macros/select_all"/>
                  </th>
                </tr>
                <tr class="controls">
                  <tal:block replace="nothing">
                    ______________ controls ______________
                  </tal:block>
                  <td colspan="99">
                    <tal:block tal:condition="python:(default_document or publishables or assets)">
                      <tal:block condition="may_change_content">
                        <div style="float: left; margin-left:0.2em; padding:0 0px 0 2px;">
                          <select name="new_position"
                            title="move selected items to">
                            <option value="Position">
                              position:
                            </option>
                            <tal:block repeat="item publishables">
                              <option value="0"
                                tal:content="repeat/item/number"
                                tal:attributes="value repeat/item/number" />
                            </tal:block>
                            <option value="0"
                              tal:attributes="value python:len(publishables) + 1">
                              end
                            </option>
                          </select>
                          <label for="new_position"
                            title="access key: alt-p"
                            accesskey="p">
                          </label>
                          <input class="button"
                            name="tab_edit_move_to:method"
                            type="submit"
                            value="Move"
                            title="move selected items into position: alt-m"
                            accesskey="m" />
                        </div>
                        &nbsp;
                        <input class="button"
                          name="tab_edit_rename:method"
                          type="submit"
                          value=" Rename..."
                          title="rename and retitle items: alt-r"
                          accesskey="r" 
                        />
                       <input class="button"
                          name="tab_edit_cut:method"
                          type="submit"
                          value="Cut"
                          title="cut items: alt-x"
                          accesskey="x" 
                        />
                      </tal:block>
                      <input class="button"
                        name="tab_edit_copy:method"
                        type="submit"
                        value="Copy"
                        title="copy items: alt-c"
                        accesskey="c" 
                      />
                      <tal:block condition="may_change_content">
                        <input class="button"
                          tal:condition="python:request.has_key('__cp')"
                          name="tab_edit_paste:method"
                          type="submit"
                          value="Paste"
                          title="paste items: alt-v" 
                          accesskey="v" 
                        />
                        <input class="button"
                          tal:condition="python:request.has_key('__cp')"
                          name="tab_edit_paste_to_ghost:method"
                          type="submit"
                          value="Paste as ghost"
                          title="paste (items on clipboard) as ghost objects: alt-g"
                          accesskey="g" 
                        />

                        <input class="warning"
                          tal:condition="may_change_content"
                          name="tab_edit_delete:method"
                          type="submit"
                          value="Delete"
                          title="there's no undo: alt-d"
                          accesskey="d"
                          onClick="return confirm('Really delete?')"
                        />
                      </tal:block>
                    </tal:block>
                  </td>
                </tr>
              </tfoot>
            </table>
          </td>
        </tr>
      </tbody>
    </table>
  </form>
</metal:block>
</metal:block>
</html>
