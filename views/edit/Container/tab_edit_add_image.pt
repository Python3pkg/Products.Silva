<!-- ___________________________ start index_html ___________________________ -->
<html metal:use-macro="here/macro_index/macros/master">

<div class="margins" metal:fill-slot="main">
<!-- ___________________________ start index_html/slot main ___________________________ -->

<h2>Insert image</h2>

<trigger tal:replace="nothing">

<h3>Add a new image</h3>

<span tal:replace="nothing"> _____________________ new image _____________________ </span>

<form action="new_image_submit" method="POST">
<table width="96%" cellspacing="0" cellpadding="5" border="0"
  tal:attributes="width container/table_width; cellspacing container/table_cellspacing;
                  cellpadding container/table_cellpadding; border container/table_border">

<tr> 
<th align="left" colspan="3">
Upload image
</th>
<th align="right">
&nbsp;
</th>
</tr>

<tr class="focus-cycle">
<td align="right">
Image id:
</td>
<td align="right">
&nbsp;
</td>
<td>
<input size="40" value="" type="text" name="field_image_id"  />
</td>
<td>
Leave blank to use the name of the original file.
</td>
</tr>

<tr class="focus">
<td align="right">
Image title:
</td>
<td align="right">
&nbsp;
</td>
<td>
<input size="40" value="" type="text" name="field_image_id"  />
</td>
<td>
&nbsp;
</td>
</tr>

<tr class="focus-cycle">
<td align="right">
alt tag:
</td>
<td align="right">
&nbsp;
</td>
<td>
<input size="40" value="" type="text" name="field_alt_tag"  />
</td>
<td>
If blank the title will be used.
</td>
</tr>

<tr class="focus">
<td align="right">
Local&nbsp;file:
</td>
<td align="right">
<span class="warning">*</span>
</td>
<td>
<input class="textarea" type="file" name="file" size="40" value="">
</td>
<td>
&nbsp;
</td>
</tr>

<span tal:replace="nothing"> ______________ controls ______________ </span>
<tr class="controls">
<td colspan="2">
<input class="cancelbutton" type="submit" name="add_cancel" value=" Cancel " />
</td>
<td align="right" colspan="2">
<input class="button" type="submit" name="add_image_submit" value=" Upload " />
</td>
</tr>
</table>
</form>

<p class="halfline">&nbsp;</p>

</trigger>

<span tal:replace="nothing"> _____________________ existing images _____________________ </span>

<h3>Choose an existing image</h3>

<form action="." name="silvaObjects" method="POST">
<table width="96%" cellspacing="0" cellpadding="0" border="0"
  tal:attributes="width container/table_width; cellspacing container/table_cellspacing;
                        border container/table_border">
<tr>
<td class="divider" width="3" colspan="4"><img src="/p_/sp" width="1" height="1" /></td>
</tr>

<span tal:replace="nothing"> ______________ framing table header ______________ </span>
<tr class="topcontrols"> 
<!-- top row of complete table with sidebar -->
<td width="22%">
<span class="back3">&nbsp;Publication</span>&nbsp;&nbsp;
<a href="treelink"
  tal:condition="python:model.get_publication() != model.get_root()"
  tal:attributes="href python:model.aq_parent.get_publication().absolute_url() + '/edit/tab_edit_add_image'">
<img tal:attributes="src string:${silva_root}/globals/up_tree_gray.gif" width="16" height="16" border="0" alt="Up to containing Publication" />
</a>
</td>
<td class="divider"><img src="/p_/sp" width="1" height="22" /></td>
<td>
<img src="/p_/sp" width="1" height="1" />
<a href="../../edit/tab_edit_add_image"
  tal:condition="python:model != model.get_root()"><img tal:attributes="src string:${silva_root}/globals/up_level_gray.gif" width="16" height="16" border="0" alt="Up one level" /></a>&nbsp;
<img width="16" height="16" alt="%s" 
  tal:replace="structure python:view.render_icon(model.meta_type)" />&nbsp;
<span class="back3" tal:content="string:${model/id} (${model/get_title_html})">folder id/title</span>&nbsp;&nbsp;
</td>
<td align="right">
&nbsp;
</td>
</tr>

<span tal:replace="nothing"> _____________________ sidebar _____________________ </span>

<tr class="focus" valign="top">
<td>
<!-- inner table for sidebar -->
<table cellspacing="0" cellpadding="1" border="0" width="100%">
<span tal:replace="nothing"> ______________ publication header ______________ </span>
<tr>
<th align="left"
  tal:attributes="class python:test(model == model.get_publication(), 'focus-light', nothing)">
<img src="/p_/sp" width="1" height="16" />
<a href="top" 
  tal:define="url python:model.get_publication().absolute_url()"
  tal:attributes="href string:${url}/edit/tab_edit_add_image"><img tal:attributes="src string:${silva_root}/globals/silvapublication.gif" width="16" height="16" border="0" alt="Silva Publication" /></a>
<a href="top" class="blacklink" tal:define="url python:model.get_publication().absolute_url()"
  tal:attributes="href string:${url}/edit/tab_edit_add_image"><span tal:replace="python:model.get_publication().id">Publication top</span></a>
</th>
</tr>

<span tal:replace="nothing"> ______________ pub folders ______________ </span>
<rowset tal:omit-tag=""
  tal:repeat="indent_item python:model.get_publication().get_container_tree()">
<tr tal:define="item python:indent_item[1]; indent python:indent_item[0]; 
oddrow repeat/indent_item/odd">
<td class="highlight"
  tal:attributes="class python:test(model == item, 'focus-light', 'focus')">
<img src="/p_/sp" width="5" height="5" tal:attributes="width python:indent * 16 + 21" />
<a href="folder"
  tal:attributes="href string:${item/absolute_url}/edit/tab_edit_add_image"><img width="16" height="16" alt="%s" 
  tal:replace="structure python:view.render_icon(item.meta_type)" /></a>
<a class="blacklink" href="title"
  tal:attributes="href string:${item/absolute_url}/edit/tab_edit_add_image">
<span tal:replace="item/id">id</span>
</a>
</td>
</tr>
</rowset>
</table>
</td>

<td class="divider"><img src="/p_/sp" width="1" height="1" /></td>

<td class="focus-cycle" colspan="2">
<!-- inner table with folder view -->

<span tal:replace="nothing"> _____________________ folder subtable _____________________ </span>

<table cellspacing="0" cellpadding="3" border="0" width="100%">
<span tal:replace="nothing"> ______________ listing header ______________ </span>
<tr>
<th align="left" width="3%">
Mark
</th>
<th align="left">
Name
</th>
<th align="left">
Size
</th>
<th align="left" width="35%">
Modified&nbsp;date
</th>
</tr>

<span tal:replace="nothing"> _____________________ images _____________________ </span>

<init tal:omit-tag=""
  tal:define="global assets python:model.get_container().get_assets_of_type('Silva Image')" />

<rowset tal:omit-tag="" tal:repeat="asset assets">
<cycle tal:omit-tag="" tal:define="oddrow repeat/asset/odd">
<tr class="focus-cycle" tal:attributes="class python:test(oddrow, 'focus', 'focus-cycle')">
<span tal:replace="nothing"> _______ radio + icon cell _______ </span>
<td nowrap="1">
<input type="radio" name="image_id" value="id"
  tal:attributes="value python:asset.id; 
checked python:test(asset.id == model.getAttribute('image_id'), 'checked', None)" />
<a href="asset"
  tal:attributes="href string:${asset/absolute_url}/edit/tab_edit"><img tal:replace="structure python:view.render_icon(asset.meta_type)" /></a>
</td>
<span tal:replace="nothing"> _______ id + title cell _______ </span>
<td> 
<a class="blacklink" href="asset"
  tal:attributes="href string:${asset/absolute_url}/edit/tab_edit">
<span tal:replace="asset/id">id</span>&nbsp;
(<span tal:replace="asset/get_title_html">title</span>)
</a>
</td>
<span tal:replace="nothing"> _______ size cell _______ </span>
<td>
0k
</td>
<span tal:replace="nothing"> _______ modification date cell _______ </span>
<td>
<span tal:condition="python:asset.get_modification_datetime() != None"
  tal:replace="structure python:view.service_utils.backend_short_datetime_to_str(asset.get_modification_datetime())">21 oct 2001 18:18</span>
<span tal:condition="python:asset.get_modification_datetime() == None" tal:omit-tag="">&nbsp;</span>
</td>
</tr>
</cycle>
</rowset>

<span tal:replace="nothing"> ______________ if empty ______________ </span>
<rowset tal:omit-tag=""
  tal:condition="python:not assets">
<tr class="focus">
<td colspan="4">
There are no images in this folder.
<a href=""
  tal:attributes="href python:model.absolute_url() + '/edit/tab_edit_add_image'"></a>
</td>
</tr>
</rowset>
</table>

</td>
</tr>

<span tal:replace="nothing"> ______________ controls ______________ </span>
<tr class="controls">
<td class="focus">
&nbsp;
</td>
<td class="divider"><img src="/p_/sp" width="1" height="23" /></td>
<td align="right" colspan="2">
<input class="button" type="submit" name="add_submit" value=" Insert image " />&nbsp;
</td>
</tr>

<tr>
<td class="divider" colspan="4"><img src="/p_/sp" width="1" height="1" /></td>
</tr>
</table>
</form>










<table width="96%" cellspacing="0" cellpadding="5" border="0"
  tal:attributes="width container/table_width; cellspacing container/table_cellspacing;
cellpadding container/table_cellpadding; border container/table_border"
  tal:define="global assets python:model.get_container().get_assets_of_type('Silva Image')"
  tal:replace="nothing">

<tr class="topcontrols"> 
<td colspan="4">
<a href="treelink"
  tal:condition="python:model.get_publication() != model.get_root()"
  tal:attributes="href python:model.aq_parent.get_publication().absolute_url() + '/default/edit/tab_edit_add_image'">
<img tal:attributes="src string:${silva_root}/globals/up_tree_gray.gif" width="16" height="16" border="0" alt="Up to containing Publication" />
</a>
<span class="back3" tal:content="structure python:'&raquo;' + model.get_container().id + '&laquo; folder'">folder id</span>
<a href="../../../default/edit/tab_edit_add_image"
  tal:condition="python:model != model.get_root()">
<img tal:attributes="src string:${silva_root}/globals/up_level_gray.gif" width="16" height="16" border="0" alt="Up one level" />
</a>
</td>
</tr>

<rowgroup tal:omit-tag=""
  tal:define="obj python:model.get_container().get_tree()">

<rowset tal:omit-tag=""
  tal:repeat="item obj">
<cycle tal:omit-tag=""
  tal:define="oddrow repeat/item/odd;
dir python:item[1]">

<tr tal:condition="python:item and repeat['item'].start">
<th class="controls-cycle" align="left" colspan="4">
Folders
</th>
</tr>

<tr class="focus-cycle"
  tal:condition="python:dir.meta_type == 'Silva Folder'"
  tal:attributes="class python:test(oddrow, 'focus', 'focus')">
<td align="right">
<a href="dir"
  tal:attributes="href string:${dir/absolute_url}/default/edit/tab_edit_add_image"><img tal:replace="structure python:model.render_icon(dir.meta_type)" /></a>
</td>
<span tal:replace="nothing"> _______ id + title cell _______ </span>
<td> 
<a class="bluelink" href="dir"
  tal:attributes="href string:${dir/absolute_url}/default/edit/tab_edit_add_image">
<span tal:replace="dir/id">id</span>&nbsp;
(<span tal:replace="dir/get_title_html">title</span>)
</a>
</td>
<span tal:replace="nothing"> _______ size cell _______ </span>
<td>
&nbsp;
</td>
<span tal:replace="nothing"> _______ modification date cell _______ </span>
<td>
&nbsp;
</td>
</tr>
</cycle>
</rowset>
</rowgroup>

<span tal:replace="nothing"> ______________ header ______________ </span>
<tr tal:condition="python:assets">
<th class="controls-cycle" align="left" width="3%">
Mark
</th>
<th class="controls-cycle" align="left">
Name
</th>
<th class="controls-cycle" align="left">
Size
</th>
<th class="controls-cycle" align="left" width="15%">
Modified&nbsp;date
</th>
</tr>

<rowset tal:omit-tag="" tal:repeat="asset assets">
<cycle tal:omit-tag="" tal:define="oddrow repeat/asset/odd">
<tr class="focus-cycle" tal:attributes="class python:test(oddrow, 'focus', 'focus-cycle')">
<span tal:replace="nothing"> _______ radio button + icon cell _______ </span>
<td nowrap="1">
<input type="radio" name="image_id" value="id"
  tal:attributes="value python:asset.id; 
checked python:test(asset.id == model.getAttribute('image_id'), 'checked', None)" />
<a href="asset"
  tal:attributes="href string:${asset/absolute_url}/edit/tab_edit"><img tal:replace="structure python:model.render_icon(asset.meta_type)" /></a>
</td>
<span tal:replace="nothing"> _______ id + title cell _______ </span>
<td> 
<a class="bluelink" href="asset"
  tal:attributes="href string:${asset/absolute_url}/edit/tab_edit">
<span tal:replace="asset/id">id</span>&nbsp;
(<span tal:replace="asset/get_title_html">title</span>)
</a>
</td>
<span tal:replace="nothing"> _______ size cell _______ </span>
<td>
&nbsp;
</td>
<span tal:replace="nothing"> _______ modification date cell _______ </span>
<td>
<span tal:condition="python:asset.get_modification_datetime() != None"
  tal:replace="structure python:model.service_utils.backend_short_datetime_to_str(asset.get_modification_datetime())">21 oct 2001 18:18</span>
<span tal:condition="python:asset.get_modification_datetime() == None" tal:omit-tag="">&nbsp;</span>
</td>
</tr>
</cycle>
</rowset>

<span tal:replace="nothing"> ______________ if empty ______________ </span>
<rowset tal:omit-tag=""
  tal:condition="python:not assets">
<tr>
<th class="controls-cycle" align="left" colspan="3">
Empty
</th>
<tr class="focus">
<td colspan="3">
There are no images in this folder. Wanna upload one?
<a href=""
  tal:attributes="href python:model.absolute_url() + '/edit/tab_edit_add_image'"></a>
</td>
</tr>
</rowset>

<span tal:replace="nothing"> ______________ controls ______________ </span>
<tr class="controls">
<td colspan="2">
<input class="cancelbutton" type="submit" name="add_cancel" value=" Cancel " />
</td>
<td align="right" colspan="2">
<input class="button" type="submit" name="add_submit" value=" Insert image " />
</td>
</tr>
</table>










<hold tal:replace="nothing">

<span tal:replace="nothing"> ______________ existing images ______________ </span>

<form action="existing_image_submit" method="POST">
<table width="96%" cellspacing="0" cellpadding="5" border="0"
  tal:attributes="width container/table_width; cellspacing container/table_cellspacing;
cellpadding container/table_cellpadding; border container/table_border">

<tr class="topcontrols"> 
<td colspan="4">
<span class="back3" tal:content="python:model.get_container().id + ' folder'">folder id</span>
<a href="../../../default/edit/tab_edit_add_image"
  tal:condition="python:model != model.get_root()">
<img tal:attributes="src string:${silva_root}/globals/up_level_gray.gif" width="16" height="16" border="0" alt="Up one level" />
</a>
</td>
</tr>

<tr class="focus" valign="top" tal:replace="nothing">
<td colspan="4">
To add an image to this document you must place it in the folder. Follow these steps:
<ol>
<li>
Enter an id (and a descriptive title is a good idea).
</li>
<li>
Click the 'Add new' button. 
</li>
<li>
A new screen will appear, in which you can upload an image.
</li>
<li>
When the upload is finished you will be in the Contents view of the folder. Click on
the link to this document to return to edit mode.
</li>
<li>
The image will be visible in the document. If necessary you can edit (align or replace) the image.
</li>
</ol>
Note: if you add an image the file will be listed below and also in the Contents view
of the folder. The image will be available for all documents in this folder.
</td>
</tr>

<span tal:replace="nothing"> ______________ alignment ______________ </span>
<tr class="controls-cycle" valign="top" tal:replace="nothing">
<td class="rowhead" colspan="2">
Page structure
</td>
<td colspan="2" align="right">
Image on its own line <input type="radio" name="align" value="stacked" checked="1" /><br />
Image in text, aligned left <input type="radio" name="align" value="align_left" /><br />
Image in text, aligned right <input type="radio" name="align" value="align_right" />
</td>
</tr>

<span tal:replace="nothing"> ______________ controls ______________ </span>
<tr class="controls">
<td colspan="2">
<input class="cancelbutton" type="submit" name="add_cancel" value=" Cancel " />
</td>
<td align="right" colspan="2">
<input class="button" type="submit" name="add_submit" value=" Insert image " />
</td>
</tr>
</table>
</form>

</hold>

</div>

</html>


