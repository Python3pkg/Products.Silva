<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html tal:omit-tag=""
  lang="en"
  xml:lang="en"
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:notal="http://www.infrae.com/silva/notal"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  tal:define="
    global vein string:properties;
    "
    i18n:domain="silva">

<!-- properties (aka tab_metadata) for Publications: XXX Fixme:
     isn't this duplicated code from the same pt above? -->
<metal:block use-macro="here/macro_index/macros/master">
<metal:block fill-slot="main">
<metal:use use-macro="view/Container/tab_metadata/macros/master">
<metal:block fill-slot="top_controls">
  <tal:block replace="nothing">
    _______ table required for vertical lineup of buttons _______ 
  </tal:block>
  <table tal:condition="silva_permissions/ApproveSilvaContent" cellspacing="0" cellpadding="0" width="100%" border="0">
    <tr>
      <td style="padding: 0.2em 0 0.2em 0">
          <a class="button"
            style="margin-top:0.5em;"
            href="tab_edit_to_folder"
            title="change Publication into Folder: alt-c"
            accesskey="c"
            tal:condition="python:type != 'Silva Root'">
            convert to folder
          </a>
      </td>
      <td class="align-right"
         style="padding: 0.2em 0 0.2em 0">
        <a class="transport"
          href="settings_addables"
          title="change the addables allowed in this publication: alt-a"
          accesskey="c"
          i18n:attributes="title">
          <tal:block i18n:translate="">
          configure <u>a</u>ddables...
          </tal:block>
        </a>
      </td>
    </tr>
  </table>
</metal:block>
<metal:fill fill-slot="more_control">
<form method="POST"
  action="."
  tal:condition="here/service_layouts/show_layout_section">
  <table class="listing">
    <thead>
      <tr tal:replace="nothing">
        ______________ vein + title row ______________
      </tr>
      <tr>
        <td class="top" colspan="4">
          <h2 tal:attributes="title string:id: ${model/id}"
            i18n:attributes="title">
            <img tal:replace="structure python:view.render_icon(model)" />                      
            layout
          </h2>
        </td>
      </tr>
    </thead>
    <tbody>
      <tr>
        <th class="align-right"
          width="12%"
          i18n:translate="element">
          element
        </th>
        <th i18n:translate="content">
          content
        </th>
        <th i18n:translate="acquired_layout">
           acquired layout
        </th>
        <th width="25%"
          i18n:translate="note">
          note
        </th>
      </tr>
      <tal:define define="field python:here.layout_form.get_field('layout')">
      <tr class="odd">
        <td class="align-right">
          <span tal:replace="python:field['title']">
            title
          </span><span class="warning" tal:condition="python:field.is_required()">*</span>
        </td>
        <td>
          <p tal:condition="model/layout_copied"
          i18n:translate="layout_copied">Layout has been copied for customization.</p>
          <input tal:replace="structure python:field.render(model.get_own_layout(), request)" />
        </td>
        <td>
          <span tal:condition="not:model/get_own_layout" tal:replace="string:${model/get_layout_description}" /><sup>&#134;</sup>
        </td>
        <td>
          <span tal:replace="structure string:${field/description}&nbsp;" />
        </td>
      </tr>
      </tal:define>
      <tr class="controls">
        <td class="align-right"
          colspan="4">
          <tal:block condition="python:model.get_layout() and not model.layout_copied()">
            <a class="button"
              style="float:left;"
              href="copy_layout_submit"
              title="copy the layout into the Publication in order to customize it"
              i18n:translate="layout_customize"
              i18n:attributes="title layout_customize_desc;">
              customize layout
            </a>
          </tal:block>
          <input class="button"
            type="submit"
            name="layout_submit:method"
            value="save layout"
            title="access key: alt-l"
            accesskey="l"
            tal:define="js string:return confirm('Really remove copied layout?')"
            tal:attributes="onclick python:(model.layout_copied() and js) or ''"
            i18n:attributes="value title"
          />
        </td>
      </tr>
    </tbody>    
  </table>
</form>
</metal:fill>
</metal:use>
</metal:block>
</metal:block>
</html>
