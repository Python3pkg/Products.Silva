<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html tal:omit-tag=""
  lang="en"
  xml:lang="en"
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:notal="http://www.infrae.com/silva/notal"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  tal:define="
    global vein string:properties;
    ">

<!-- properties (aka tab_metadata) for Publications: XXX Fixme:
     isn't this duplicated code from the same pt above? -->
<metal:block use-macro="here/macro_index/macros/master">
<metal:block fill-slot="main">
<metal:use use-macro="view/Container/tab_metadata/macros/master">
<metal:fill fill-slot="more_control">
<form tal:condition="here/service_layouts/get_installed_names" method="POST" action=".">
  <table class="listing">
    <thead>
      <tr tal:replace="nothing">
        ______________ vein + title row ______________
      </tr>
      <tr>
        <td class="top" colspan="3">
          <h2 tal:attributes="title string:id: ${model/id}">
            <img tal:replace="structure python:view.render_icon(model)" />                      
            layout
          </h2>
        </td>
      </tr>
    </thead>
    <tbody>
      <tr>
        <th class="align-right"
          width="12%"
          i18n:translate="element">
          element
        </th>
        <th i18n:translate="content">
          content
        </th>
        <th width="25%"
          i18n:translate="note">
          note
        </th>
      </tr>
      <tal:define define="field python:here.layout_form.get_field('layout')">
      <tr class="odd">
        <td class="align-right">
          <span tal:replace="python:field['title'].lower()">
            title
          </span><span class="warning" tal:condition="python:field.is_required()">*</span>
        </td>
        <td><p tal:condition="model/layout_copied">Layout has been copied in order to customize it !</p>
            <input tal:replace="structure python:field.render(model.get_layout(), request)" />
        </td>
        <td><span tal:replace="structure string:${field/description}&nbsp;" />
        </td>
      </tr>
      <tr class="even" tal:condition="python:model.get_layout() and not model.layout_copied()">
        <td class="align-right">&nbsp;
        </td>
        <td><a class="button" href="copy_layout_submit">Copy layout</a>
        </td>
        <td><span>You need to copy the layout if you want to customize it</span>
        </td>
      </tr>
    
      </tal:define>
      <tr class="controls">
        <td class="align-right"
          colspan="4">
          <input class="button"
            type="submit"
            name="layout_submit:method"
            value="save layout"
            title="access key: alt-l"
            accesskey="l"
            tal:define="js string:return confirm('Really remove copied layout?')"
            tal:attributes="onclick python:(model.layout_copied() and js) or ''"
          />
        </td>
      </tr>
    </tbody>    
  </table>
</form>
</metal:fill>
</metal:use>
</metal:block>
</metal:block>
</html>
