<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html tal:omit-tag=""
  lang="en"
  xml:lang="en"
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:notal="http://www.infrae.com/silva/notal"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  tal:define="
    global breadcrumb_vein string:Rename;
    global active_tab string:tab_edit;
    "
  i18n:domain="silva">
<metal:block use-macro="here/macro_index/macros/master">
<metal:block fill-slot="main"
  tal:define="objects view/REQUEST/ids">

<tal:condition condition="python:view.REQUEST.has_key('ids')">

<div class="focus-rectangle">
  <form action="tab_edit_rename_submit" method="POST">
    <table class="listing">
      <thead>
        <tr>
          <td class="top location" colspan="4">
          <h2>
            <img tal:replace="structure python:view.render_icon(model)" />
            <span i18n:translate="rename_objects_in">rename objects in</span>       
            &#xab;<tal:block content="title" />&#xbb;
          </h2>
          </td>
        </tr>
      </thead>

      <tbody>
        <tr>
          <th class="align-right" i18n:translate="aspect">
            aspect
          </th>
          <th i18n:translate="old">
            old
          </th>
          <th i18n:translate="new">
            new
          </th>
          <th i18n:translate="notes">
          notes
          </th>
        </tr>

        <tal:repeat repeat="objectid objects">
        <tal:define define="object python:getattr(model, objectid)">
        <tr class="odd" valign="top">
          <td class="align-right" i18n:translate="id">
            id
          </td>
          <td>
            <span tal:replace="object/getId" />&nbsp;
          </td>
          <td>
            <input type="text" name="name" style="width: 100%" value="value"
              tal:attributes="name string:id_${object/getId}; value object/getId" />
          </td>
          <td>
          </td>
          </tr>

          <tr class="even" valign="top">
          <td class="align-right" i18n:translate="title">
            title
          </td>
          <td>
            <span tal:replace="object/get_title_editable | object/getId" />
          </td>
          <td width="45%"
              tal:define="is_title_editable python:view.is_title_editable(object)">
            <input
              type="text"
              name="name"
              style="width: 100%"
              value="value"
              tal:condition="is_title_editable"
              tal:attributes="
                name string:title_${object/getId}; 
                value object/get_title_editable;" />
            <span class="error"
                tal:condition="not: is_title_editable">
              This folder's title can only be changed via it's default
              document.
            </span>
          </td>
          <td>
            <span class="error" 
              tal:condition="python: object.getId() == 'index'"
              i18n:translate="changes_the_title_of_the_folder">
              Changes the title of the folder!
            </span>
          </td>
        </tr>
        <tr class="divider"
          tal:condition="not: repeat/objectid/end">
          <td colspan="5">
          </td>
        </tr>
        </tal:define>
        </tal:repeat>
      </tbody>

      <tfoot>
        <tr class="controls">
          <td colspan="4">
            <input class="button" style="float:right;" type="submit" value=" Rename " title="access key: alt-r" accesskey="r" />
            <input class="cancel" type="button" name="edit_cancel" value=" Cancel " onClick="history.back()" title="access key: alt-c" accesskey="c" />
          </td>
        </tr>
      </tfoot>
    </table>
  </form>
</div>

</tal:condition>

<tal:condition condition="python: not here.REQUEST.has_key('ids')">
  <span i18n:translate="no_items_to_rename">
    No items to rename!
  </span>
  <br />
  <a href="#" tal:attributes="href python:'/'.join(model.getPhysicalPath()) + '/edit'"
    i18n:translate="edit">
    edit
  </a>
</tal:condition>

</metal:block>
</metal:block>
</html>
