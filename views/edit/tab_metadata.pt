<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html tal:omit-tag=""
  lang="en"
  xml:lang="en"
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:notal="http://www.infrae.com/silva/notal"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  tal:define="
    global vein string:metadata;"
  i18n:domain="silva">

<!-- tab_metadata for content (non-Container) objects -->
<metal:block use-macro="here/macro_index/macros/master">
  
<metal:block metal:fill-slot="middleground">
  <div class="middleground"
    tal:define="
      isfolder python: type == 'Silva Folder';
      ispublication python: type == 'Silva Publication';
      isghostfolder python: type == 'Silva Ghost Folder';">
    <a title="miscellaneous settings: alt-s"
      accesskey="p"
      tal:attributes="href string:${url}/edit/tab_settings"
      i18n:attributes="title;accesskey tab_settings_accesskey"
      i18n:translate=""
      ><u>s</u>ettings...</a>
    <tal:block condition="context/is_subscribable_content">
      <a title="manage subscriptions: alt-u"
        accesskey="p"
        tal:attributes="href string:${url}/edit/tab_subscriptions"
        i18n:attributes="title;accesskey manage_subscriptions_accesskey"
        i18n:translate=""
        >s<u>u</u>bscriptions...</a>
    </tal:block>
    <tal:block condition="python: ispublication and may_approve_content">
      <a title="change the addables allowed in this publication: alt-a"
        href="settings_addables"
        accesskey="a"
        i18n:attributes="title;accesskey configure_addables_accesskey"
        i18n:translate=""
        ><u>a</u>ddables...</a>
    </tal:block>
  </div>
</metal:block>

<metal:block fill-slot="main">
  <table class="columns columns2">
    <tbody>
      <tr>
        <tal:block replace="nothing">
          _____________________ sidebar _____________________
        </tal:block>
        <td class="left">
          <metal:block use-macro="view/macro_vein_navigation/macros/vein">
            <metal:fill-slot fill-slot="sidebar">
              <tal:block replace="structure python: view.service_sidebar.render(model, 'tab_metadata', vein)" />
            </metal:fill-slot>
          </metal:block>
        </td>
        <tal:block replace="nothing">
          _____________________ main _____________________
        </tal:block>
        
        <td class="main"
          tal:define="display_flag python:1;">
          
          <tal:block condition="model/implements_versioning">
            <tal:block 
              define="content model/get_editable | nothing;"
              condition="model/get_unapproved_version"
              >
              <!-- editable version metadata table, thus editable -->
              <metal:block use-macro="here/macro_edit_metadata/macros/metadata" />
            </tal:block>
            
            <tal:block 
              define="content model/get_previewable | nothing;"
              condition="model/get_approved_version"
              >
              <metal:block use-macro="here/macro_view_metadata/macros/metadata">
                <!-- approved version metadata table, so only viewable -->
                <h2 metal:fill-slot="table_title">
                  <img tal:replace="structure python:view.render_icon(model)" />
                  <tal:block i18n:translate="">metadata
                  <tal:block condition="not: model/implements_container" i18n:name="for_approved_version_of_title">
                    <tal:block i18n:translate="">for approved version of
                      &#xab;<span tal:replace="string:${title}" i18n:name="title">title</span>&#xbb;</tal:block>
                  </tal:block></tal:block>
                </h2>
              </metal:block>
            </tal:block>
            
            <tal:block 
              define="
                content model/get_viewable | nothing;
                display_flag python:0"
              condition="model/get_public_version"
              >
              <metal:block use-macro="here/macro_view_metadata/macros/metadata">
                <!-- published version metadata table, so only viewable -->
                <h2 metal:fill-slot="table_title">
                  <img tal:replace="structure python:view.render_icon(model)" />
                  <tal:block i18n:translate="">metadata</tal:block>
                  <span tal:condition="not: model/implements_container" i18n:translate="">
                    for public version of
                    &#xab;<span tal:replace="string:${title}" i18n:name="title">title</span>&#xbb;
                  </span>
                </h2>
              </metal:block>
            </tal:block>
          </tal:block>
          
          <tal:block condition="not: model/implements_versioning">
            <tal:block define="content model">
              <!-- non-versioned content, thus editable -->
              <metal:block use-macro="here/macro_edit_metadata/macros/metadata" />
            </tal:block>
          </tal:block>
        </td>
      </tr>
    </tbody>
  </table>
</metal:block>
</metal:block>
</html>
