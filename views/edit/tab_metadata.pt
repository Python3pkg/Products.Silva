<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html tal:omit-tag=""
  lang="en"
  xml:lang="en"
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:notal="http://www.infrae.com/silva/notal"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  tal:define="
    global vein string:metadata;"
  i18n:domain="silva">

<!-- tab_metadata for content (non-Container) objects -->
<metal:block use-macro="here/macro_index/macros/master">
  
<metal:block metal:fill-slot="middleground">
  <div class="middleground"
    tal:define="
      isfolder python: type == 'Silva Folder';
      ispublication python: type == 'Silva Publication' or type == 'Silva Root';
      isghostfolder python: type == 'Silva Ghost Folder';">
    <a title="miscellaneous settings: alt-e"
      accesskey="e"
      tal:attributes="href string:${url}/edit/tab_settings"
      i18n:attributes="title;accesskey tab_settings_accesskey"
      i18n:translate=""
      >s<u>e</u>ttings...</a>
    <tal:block condition="context/is_subscribable_content">
      <a title="manage subscriptions: alt-u"
        accesskey="u"
        tal:attributes="href string:${url}/edit/tab_subscriptions"
        i18n:attributes="title;accesskey manage_subscriptions_accesskey"
        i18n:translate=""
        >s<u>u</u>bscriptions...</a>
    </tal:block>
    <tal:block condition="python: ispublication and may_approve_content">
      <a title="change the addables allowed in this publication: alt-a"
        href="tab_addables"
        accesskey="a"
        i18n:attributes="title;accesskey configure_addables_accesskey"
        i18n:translate=""
        ><u>a</u>ddables...</a>
    </tal:block>
    <tal:block define="
      permissions view/get_silva_permissions;
      unapproved_version model/get_unapproved_version | nothing;
      have_approve_permission permissions/ApproveSilvaContent | nothing;
      ">
      <a title="publish this document: alt-p"
        accesskey="p"
        class="executor"
        tal:attributes="href string:${model/absolute_url}/edit/tab_metadata_publish"
        i18n:translate=""
        i18n:attributes="title;accesskey open_to_public_accesskey"
        tal:condition="python: unapproved_version and have_approve_permission">
        publish&nbsp;now
      </a>
    </tal:block>
  </div>
</metal:block>

<metal:block fill-slot="main">
  <table class="columns columns2">
    <tbody>
      <tr>
        <tal:block replace="nothing">
          _____________________ sidebar _____________________
        </tal:block>
        <td class="left">
          <metal:block use-macro="view/macro_vein_navigation/macros/vein">
            <metal:fill-slot fill-slot="sidebar">
              <tal:block replace="structure python: view.service_sidebar.render(model, 'tab_metadata', vein)" />
            </metal:fill-slot>
          </metal:block>
        </td>
        <tal:block replace="nothing">
          _____________________ main _____________________
        </tal:block>
        
        <td class="main"
          tal:define="display_flag python:1;">
          <tal:block replace="nothing"> _______ edit editable version metadata _______ </tal:block>
          <tal:block condition="model/implements_versioning">
            <tal:block 
              define="content model/get_editable | nothing;"
              condition="model/get_unapproved_version">
              <metal:block use-macro="here/macro_edit_metadata/macros/metadata" />
            </tal:block>
            
            <tal:block replace="nothing"> _______ view previewable version metadata _______ </tal:block>
            <tal:block 
              define="content model/get_previewable | nothing;"
              condition="model/get_approved_version">
              <metal:block use-macro="here/macro_view_metadata/macros/metadata">
                <h2 metal:fill-slot="table_title">
                  <img tal:replace="structure python:view.render_icon(model)" />
                  <tal:block i18n:translate="">metadata
                  <tal:block condition="not: model/implements_container" i18n:name="for_approved_version_of_title">
                    <tal:block i18n:translate="">for approved version of
                      &#xab;<span tal:replace="string:${title}" i18n:name="title">title</span>&#xbb;
                    </tal:block>
                  </tal:block>
                  </tal:block>
                </h2>
              </metal:block>
            </tal:block>
            
            <tal:block replace="nothing"> _______ view public version metadata _______ </tal:block>
            <tal:block 
              define="
                content model/get_viewable | nothing;
                display_flag python:0"
              condition="model/get_public_version">
              <metal:block use-macro="here/macro_view_metadata/macros/metadata">
                <h2 metal:fill-slot="table_title">
                  <img tal:replace="structure python:view.render_icon(model)" />
                  <tal:block i18n:translate="">metadata</tal:block>
                  <span tal:condition="not: model/implements_container" i18n:translate="">
                    for published version of
                    &#xab;<span tal:replace="string:${title}" i18n:name="title">title</span>&#xbb;
                  </span>
                </h2>
              </metal:block>
            </tal:block>

            <tal:block replace="nothing"> _______ view closed version metadata _______ </tal:block>
            <tal:block 
              define="
                content model/get_last_closed | nothing;
                display_flag python:0"
              condition="python: not model.get_next_version() and not model.get_public_version()">
              <metal:block use-macro="here/macro_view_metadata/macros/metadata">
                <h2 metal:fill-slot="table_title">
                  <img tal:replace="structure python:view.render_icon(model)" />
                  <tal:block i18n:translate="">metadata</tal:block>
                  <span tal:condition="not: model/implements_container" i18n:translate="">
                    for closed version of
                    &#xab;<span tal:replace="string:${title}" i18n:name="title">title</span>&#xbb;
                  </span>
                </h2>
              </metal:block>
            </tal:block>
          </tal:block>
          
          <tal:block replace="nothing"> _______ edit single version metadata _______ </tal:block>
          <tal:block condition="not: model/implements_versioning">
            <tal:block define="content model">
              <metal:block use-macro="here/macro_edit_metadata/macros/metadata" />
            </tal:block>
          </tal:block>
        </td>
      </tr>
    </tbody>
  </table>
</metal:block>
</metal:block>
</html>
