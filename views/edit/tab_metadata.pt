<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html tal:omit-tag=""
  lang="en"
  xml:lang="en"
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:notal="http://www.infrae.com/silva/notal"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  tal:define="
    global vein string:properties;"
  i18n:domain="silva">

<!-- tab_metadata for content (non-Container) objects -->
<metal:block use-macro="here/macro_index/macros/master">
<metal:block fill-slot="main">
  <table class="columns columns2">
    <tbody>
      <tr>
        <tal:block replace="nothing">
          _____________________ sidebar _____________________
        </tal:block>
        <td class="left">
          <metal:block use-macro="view/macro_vein_navigation/macros/vein" />
        </td>
        <tal:block replace="nothing">
          _____________________ main _____________________
        </tal:block>
        
        <td class="main"
          tal:define="display_flag python:1;">
          <table class="listing">
            <thead>
              <tr tal:replace="nothing">
                ______________ vein + title row ______________
              </tr>
              <tr>
                <td class="top">
                  <h2 tal:attributes="title string:id: ${model/id}" 
                    i18n:translate="">
                    <img tal:replace="structure python:view.render_icon(model)" />                      
                    properties of &#xab;<tal:block content="title"
                    i18n:name="title" />&#xbb;
                  </h2>
                </td>
              </tr>
              <tr tal:replace="nothing">
                ______________ top controls row ______________
              </tr>
              <tr class="top-controls">
                <td>
                  <tal:condition condition="may_approve_content">
                    <tal:block 
                      condition="here/service_subscriptions/subscriptionsEnabled | nothing">
                      <a class="transport"
                        style="float:right;"
                        title="manage subscriptions: alt-m"
                        accesskey="m"
                        tal:attributes="href string:${url}/edit/tab_subscriptions"
                        i18n:attributes="title;accesskey manage_subscriptions_accesskey"
                        i18n:translate="">
                        manage subscriptions...
                      </a>
                    </tal:block>
                  </tal:condition>
                </td>
            </thead>
          </table>
          
          <tal:block condition="model/implements_versioning">
            <tal:block 
              define="version model/get_editable | nothing;"
              condition="model/get_unapproved_version"
              >
              <!-- editable version metadata table, thus editable -->
              <metal:block use-macro="here/macro_metadata/macros/edit_table" />
            </tal:block>
            
            <tal:block 
              define="version model/get_previewable | nothing;"
              condition="model/get_approved_version"
              >
              <metal:block use-macro="here/macro_metadata/macros/view_table">
                <!-- approved version metadata table, so only viewable -->
                <h2 metal:fill-slot="table_title">
                  <img tal:replace="structure python:view.render_icon(model)" />
                  <tal:block i18n:translate="">metadata
                  <tal:block condition="not: model/implements_container" i18n:name="for_approved_version_of_title">
                    <tal:block i18n:translate="">for approved version of
                      &#xab;<span tal:replace="string:${title}" i18n:name="title">title</span>&#xbb;</tal:block>
                  </tal:block></tal:block>
                </h2>
              </metal:block>
            </tal:block>
            
            <tal:block 
              define="
                version model/get_viewable | nothing;
                display_flag python:0"
              condition="model/get_public_version"
              >
              <metal:block use-macro="here/macro_metadata/macros/view_table">
                <!-- published version metadata table, so only viewable -->
                <h2 metal:fill-slot="table_title">
                  <img tal:replace="structure python:view.render_icon(model)" />
                  <tal:block i18n:translate="">metadata</tal:block>
                  <span tal:condition="not: model/implements_container" i18n:translate="">
                    for public version of
                    &#xab;<span tal:replace="string:${title}" i18n:name="title">title</span>&#xbb;
                  </span>
                </h2>
              </metal:block>
            </tal:block>
          </tal:block>
          
          <tal:block condition="not: model/implements_versioning">
            <tal:block define="version model">
              <!-- non-versioned content, thus editable -->
              <metal:block use-macro="here/macro_metadata/macros/edit_table" />
            </tal:block>
          </tal:block>
        </td>
      </tr>
    </tbody>
  </table>
</metal:block>
</metal:block>
</html>
