<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html tal:omit-tag=""
  lang="en"
  xml:lang="en"
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:notal="http://www.infrae.com/silva/notal"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  tal:define="
    global breadcrumb_vein string:Edit;
    refresh_time python:19 * 60;
  ">
<metal:block use-macro="here/macro_index/macros/master">
<metal:block fill-slot="metatype_css">
<link href="globals/widgetEditor.css"
  rel="stylesheet"
  tal:attributes="href string:${root_url}/globals/widgetEditor.css"
/>
</metal:block>
<metal:block fill-slot="main"
  tal:define="
    is_locked model/sec_is_locked;
    unapproved_version model/get_unapproved_version;
    request_pending python:model.is_version_approval_requested();
">
<model tal:condition="python:unapproved_version and not request_pending and not is_locked"
         tal:replace="structure view/edit">Content</model>

<span tal:replace="nothing"> _______ simultaneous edit lock _______ </span>
<tal:condition condition="python:unapproved_version and is_locked">
<form action="tab_edit_break_lock" method="POST">
  <div class="feedback"><span class="warning">
    <b>Note: </b>This object is already being edited by another user, and is temporarily locked.
    </span><br />
    <input class="warning" style="margin-left:0;" type="submit" value="Break lock" title="Somebody else just edited this item, unlock it: alt-u" accesskey="u" />
  </div>
</form>
</tal:condition>

<span tal:replace="nothing"> _______ make changes in a new version _______ </span>
<tal:condition condition="python: not model.get_next_version()">
<form action="tab_edit_make_copy" method="POST">
  <div class="feedback">
    <b>Note: </b>There is already a published (or closed) version of this content. Changes can only be made in a new version.<br />
    <input class="button" style="margin-left:0;" type="submit" value="Create new version" title="Work on a new version while the previous one stays online: alt-c" accesskey="c" />
    </div>
</form>
</tal:condition>

<span tal:replace="nothing"> _______ make changes after revoking approval _______ </span>
<tal:condition condition="python: model.get_approved_version()">
<form action="tab_edit_revoke_approval" method="POST">
  <div class="feedback">
    <b>Note: </b>This version is approved but not yet public. In order to make changes you need to first revoke the approval.<br />
    <input class="button" style="margin-left:0;" type="submit" value="Revoke approval" title="'Un-approve' this item in order to edit: alt-r" accesskey="r" />
  </div>
</form>
</tal:condition>

<span tal:replace="nothing"> _______ make changes after withdraw approval request _______ </span>
<tal:condition condition="python:model.is_version_approval_requested()">
<form action="tab_status_withdraw" method="POST">
  <div class="feedback">
    <b>Note: </b>This version has an request for approval pending. In order to make changes you need to first withdraw the pending request.<br />
    <input class="button" style="margin-left:0;" type="submit" value="Withdraw request" title="Withdraw a request for approval in order to edit: alt-w" accesskey="w" />
    <input type="hidden" name="rejection_status" tal:attributes="value python:test(may_approve_content, 'true', 'false')" />
    <input type="hidden" name="tab_name" value="edit" />
  </div>
</form>
</tal:condition>

</metal:block>
</metal:block>
</html>

