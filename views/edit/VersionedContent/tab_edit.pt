<!-- ___________________________ start index_html ___________________________ -->
<tal:block define="global breadcrumb_vein string:Edit;" />
<html metal:use-macro="here/macro_index/macros/master">
<metal:block fill-slot="main">
<!-- ___________________________ start index_html/slot main ___________________________ -->

<tal:block tal:define="dummy python:model.security_trigger();
                       global could_lock model/sec_create_lock;
                       global unapproved_version model/get_unapproved_version;
                       global request_pending python:model.is_version_approval_requested();" />

<model tal:condition="python:unapproved_version and not request_pending and could_lock"
         tal:replace="structure view/edit">Content</model>

<span tal:replace="nothing"> _______ simultaneous edit lock _______ </span>
<tal:block tal:condition="python:unapproved_version and not could_lock">
<div class="feedback"><span class="warning">
<b>Note: </b>This object is already being edited by another user, and is temporarily locked.
</span>
</div>
<div class="margins">
<form action="tab_edit_break_lock" action="POST"><input class="warningbutton" type="submit" value="Break lock" /></form>
</div>
</tal:block>

<span tal:replace="nothing"> _______ make changes in a new version _______ </span>
<div tal:condition="python: not model.get_next_version()">
<form action="tab_edit_make_copy" method="POST">
<div class="feedback">
<b>Note: </b>There is already a published (or closed) version of this content. Changes can only be made in a new version.
</div>
<div class="margins">
<input class="button" type="submit" value="Create new version" />
</div>
</form>
</div>

<span tal:replace="nothing"> _______ make changes after revoking approval _______ </span>
<div tal:condition="python: model.get_approved_version()">
<form action="tab_edit_revoke_approval" method="POST">
<div class="feedback">
<b>Note: </b>This version is approved but not yet public. In order to make changes you need to first revoke the approval.
</div>
<div class="margins">
<input class="button" type="submit" value="Revoke approval" />
</div>
</form>
</div>

<span tal:replace="nothing"> _______ make changes after withdraw approval request _______ </span>
<div tal:condition="python:model.is_version_approval_requested()">
<form action="tab_status_withdraw" method="POST">
<div class="feedback">
<b>Note: </b>This version has an request for approval pending. In order to make changes you need to first withdraw the pending request.
</div>
<div class="margins">
<input type="hidden" name="rejection_status" tal:attributes="value python:test(here.get_silva_permissions()['ApproveSilvaContent'], 'true', 'false')" />
<input type="hidden" name="tab_name" value="edit" />
<input class="button" type="submit" value="Withdraw request" />
</div>
</form>
</div>

<!-- ___________________________ end index_html/slot main ___________________________ -->
</metal:block>
</html>
<!-- ___________________________ end index_html ___________________________ -->

