<html tal:omit-tag=""
  tal:define="
    view here;
    model request/model;
    root_url model/get_root_url;
    global editable model/get_editable;
    title model/get_title_editable;
    vein string:editor;
">
<table class="columns columns3">
  <tbody>
    <tr>
      <tal:block replace="nothing">
        _____________________ sidebar subtable _____________________
      </tal:block>
      <td class="left"
        tal:define="template_id string:tab_edit">
        <metal:block use-macro="view/macro_vein_navigation/macros/vein" />
      </td>

      <tal:block replace="nothing">
        _____________________ main _____________________
      </tal:block>
      <td class="main">

<form method="POST" 
  name="form" 
  action="submit"
  tal:condition="model/get_unapproved_version" 
  tal:define="
    version     python:model.get_editable();
    link_status python:here.get_ghost_link_status_text(version);
    content_url python:version.get_haunted_url();
">
 
  <table class="listing">
    <thead>
      <tal:block replace="nothing">
        ______________ vein + title row ______________
      </tal:block>
      <tr>
        <td class="top"
          colspan="3">
          <h2>
            <img tal:replace="structure python:view.render_icon(model)" />
            ghost of &#xab;<tal:block content="title" />&#xbb;
          </h2>
        </td>
      </tr>
    </thead>

    <tbody>
      <tr>
        <th class="align-right"
          width="15%">
          attributes
        </th>
        <th>
          content
        </th>
        <th width="30%">
          note
        </th>
      </tr>

      <tr class="even">
        <td class="align-right">
          <script type="text/javascript"
            tal:content="structure here/reference.js" />
          <input class="transport" 
            type="button" 
            value="reference..."
            title="Locate item to refer to: alt-r"
            accesskey="r"
            tal:define="asset_context python:here.get_start_container();"
            tal:attributes="onclick python:'getAssetReference(\'%s/edit/asset_lookup?filter=Content&asset_context=%s\', \'_reference_\', \'form\', \'content_url\');;return false;;' % (asset_context.absolute_url(), '/'.join(asset_context.getPhysicalPath()))"
            /><span class="warning">*</span>
        </td>
        <td>
          <input style="width:100%;"
            type="text"
            name="content_url"
            size="60" 
            value="" 
            tal:attributes="value content_url"
          />
        </td>
        <td>
          Path to original (begins with &#8216;/&#8217;).
        </td>
      </tr>

      <tr class="odd"
        tal:condition="not:link_status">
        <td class="align-right">
          link
        </td>
        <td>
          <a href="original"
            tal:attributes="href python:content_url + '/edit/tab_edit'"
            tal:content="python: model.get_editable().get_title_editable()">
            Link
          </a>
        </td>
        <td>
          Link to editor screen of original.
        </td>
      </tr>

      <tr class="odd"
        tal:condition="link_status">
        <td class="field-title">
          problem
        </td>
        <td class="alert">
          <span class="error"
            tal:content="structure link_status" />
        </td>
        <td>
          &nbsp;
        </td>
      </tr>
    </tbody>

    <tfoot>
      <tr class="controls">
        <td class="align-right" 
          colspan="3">
          <input class="button"
            type="submit"
            name="form_submitted"
            value="save reference"
            title="access key: alt-s"
            accesskey="s"
          />
        </td>
      </tr>
    </tfoot>
  </table>
</form>
        
      </td>
      <tal:block replace="nothing">
        _____________________ right column _____________________ 
      </tal:block>
      <td class="right">        
        &nbsp;
      </td>
    </tr>
  </tbody>
</table>
        
</html>
