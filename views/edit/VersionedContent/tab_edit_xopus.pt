<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html tal:omit-tag=""
  lang="en"
  xml:lang="en"
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:notal="http://www.infrae.com/silva/notal"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  tal:define="
    global vein string:xopus;
  ">
<metal:block use-macro="here/macro_index/macros/master">
<metal:block fill-slot="main">

<tal:block tal:define="
  global could_lock model/sec_create_lock;
  global unapproved_version model/get_unapproved_version;" />

<div xopus="true" autostart="true">
  <xml>
    <pipeline xml="silva.xml" xsd="silva.xsd"
       tal:attributes="xml python: model.absolute_url()+'/xopus/xopus_get_xml';
                       xsd view/xopus/silva.xsd/absolute_url">
      <view id="defaultView" default="true">
        <transform xsl="silva.xsl"
          tal:attributes="xsl view/xopus/silva.xsl/absolute_url">
        </transform>
      </view>
      <view id="treeView">
        <transform xsl="../../../xopus/treeview/tree.xsl"
         tal:attributes="xsl view/xopus/xopus/treeview/tree.xsl/absolute_url">
        </transform>
      </view>
    </pipeline>
  </xml>
</div>

<span tal:replace="nothing"> _______ simultaneous edit lock _______ </span>
<tal:block tal:condition="python:unapproved_version and not could_lock">
<div class="feedback"><span class="warning">
<b>Note: </b>This object is already being edited by another user, and is temporarily locked.
</span>
</div>
<div>
<form action="tab_edit_break_lock" method="POST"><input class="warningbutton" type="submit" value="Break lock" /></form>
</div>
</tal:block>

<span tal:replace="nothing"> _______ make changes in a new version _______ </span>
<div tal:condition="python: not model.get_next_version()">
<form action="tab_edit_make_copy" method="POST">
<div class="feedback">
<b>Note: </b>There is already a published (or closed) version of this content. Changes can only be made in a new version.
</div>
<div>
<input class="button" type="submit" value="Create new version" />
</div>
</form>
</div>

<span tal:replace="nothing"> _______ make changes after revoking approval _______ </span>
<div tal:condition="python: model.get_approved_version()">
<form action="tab_edit_revoke_approval" method="POST">
<div class="feedback">
<b>Note: </b>This version is approved but not yet public. In order to make changes you need to first revoke the approval.
</div>
<div>
<input class="button" type="submit" value="Revoke approval" />
</div>
</form>
</div>

</metal:block>
</metal:block>
</html>

