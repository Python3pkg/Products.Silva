<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html tal:omit-tag=""
  lang="en"
  xml:lang="en"
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:notal="http://www.infrae.com/silva/notal"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  >
<!-- start of 3 Funky macro definitions to reuse the listing -->
<metal:block define-macro="normal_groups_listing">
  <tal:block define="groups view/service_groups/listNormalGroups | nothing">
    <metal:block use-macro="here/macro_groups_listing/macros/listing">
      <metal:block fill-slot="actions" >
        <metal:block define-slot="listing_actions" />
      </metal:block>
    </metal:block>
  </tal:block>
</metal:block>

<metal:block define-macro="virtual_groups_listing">
  <tal:block define="groups view/service_groups/listVirtualGroups | nothing">
    <metal:block use-macro="here/macro_groups_listing/macros/listing">
      <metal:block fill-slot="actions" >
        <metal:block define-slot="listing_actions" />
      </metal:block>
    </metal:block>
  </tal:block>
</metal:block>

<metal:block define-macro="all_groups_listing">
  <tal:block define="groups view/service_groups/listAllGroups | nothing">
    <metal:block use-macro="here/macro_groups_listing/macros/listing">
      <metal:block fill-slot="actions" >
        <metal:block define-slot="listing_actions" />
      </metal:block>
    </metal:block>
  </tal:block>
</metal:block>
<!-- end of 3 Funky macro definitions to reuse the listing -->

<!-- actual macro where layout is done -->
<metal:block define-macro="listing">
  <div class="highlight"
    style="
      padding: 0.5em; 
      width: 18em; 
      margin: 0em 0em 2em 1em;
      border: 1px solid #567275;">
    <metal:block define-macro="listing_no_style">
      <!-- this form deliberately has no submit buttons; filled in in slots -->
      <form action="."
        method="POST">
        <h2>
          <img tal:replace="structure python:view.render_icon_by_meta_type('Silva Group')" />
          Available groups
        </h2>

        <table class="listing">
          <!-- thead>
            <tr>
              <td class="top"
                style="white-space: nowrap;">
                <h2>
                  Available groups:
                </h2>
              </td>
            </tr>
          </thead -->

          <tr class="top-controls">
            <td>
              <metal:block define-slot="groups_admin_action">
                <a class="navigation" 
                  style="float: right;"
                  accesskey="g"
                  title="Groups administration... - alt-g"
                  href="tab_access_groups"
                  tal:condition="python:model_is_container and group_service">
                  Groups administration...
                </a>
              </metal:block>
            </td>
          </tr>
          <tr valign="top"
            tal:condition="groups">
            <td style="padding: 0;">
              <select class="clipboard"
                style="width: 100%"
                multiple="multiple"
                name="groups:list"
                size="10">
                <tal:block condition="groups">
                  <option disabled="disabled"
                    value="None">
                    Select group(s)...
                  </option>
                  <option disabled="disabled"
                    value="None">
                    Ctrl-click for multi-select...
                  </option>
                  <option value="group"
                    tal:repeat="group groups"
                    tal:content="group"
                    tal:attributes="value group">
                    Group
                  </option>
                </tal:block>
                <option tal:condition="not:groups">
                  No groups available
                </option>
              </select>
            </td>
          </tr>
          <!-- tr class="controls controls-1 align-left">
            <td>
              <span class="widebody"
                tal:condition="groups">
                (Ctrl-mouseclick for a multi-select)
              </span>
            </td>
          </tr -->
          <tr class="controls"
            tal:condition="groups">
            <td>
              <metal:block define-slot="actions" />
            </td>
          </tr>
        </table>
      </form>
    </metal:block>
  </div>
</metal:block>
</html>
