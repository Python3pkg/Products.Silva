<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html tal:omit-tag=""
  lang="en"
  xml:lang="en"
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:notal="http://www.infrae.com/silva/notal"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
>

<tal:block replace="nothing">
  _______ macro parent _______
  _______ for subscreens that need an obvious link up to parent (import, export, etc.) _______
</tal:block>
<metal:block define-macro="parent">
        <table class="listing"
          style="margin-bottom:0;">
          <thead>
            <tr tal:replace="nothing">
              ______________ link to parent screen ______________
            </tr>
            <tr>
              <td class="parent">
                <a href="parent screen"
                  title="up to parent screen: alt-u"
                  accesskey="u"
                  tal:attributes="href active_tab">
                  <div class="navigation-border"
                    tal:content="structure string:<u>u</u>p to ${parent_screen_name}...">
                    parent screen
                  </div>
                </a>
              </td>
            </tr>
          </thead>
        </table>
</metal:block>


<tal:block replace="nothing">
  _______ macro vein _______
  _______ renders the sidebar vein navigation for containers and content objects _______
  _______ containers have a slot for the vein links of the content tree_______
</tal:block>
<metal:define-macro define-macro="vein">
          <table class="listing">
            <thead>
              <tr>
                <th class="top"
                  tal:define="
                    model_is_root python: model.meta_type == 'Silva Root';
                    model_is_publication python: model.meta_type == 'Silva Publication';
                    publication model/get_publication;
                    containing_publication publication/../get_publication | publication;
                    query_string query_string | nothing;
                    vein_id template_id | python: template.id + test(query_string, query_string, '');
                  ">
                  <a class="up"
                    href="../../edit/tab_edit"
                    title="up one level: alt-]"
                    accesskey="]"
                    tal:condition="not: model_is_root"
                    tal:attributes="href string:../../edit/${vein_id}">
                    <img width="9"
                      height="9"
                      border="0"
                      alt="Up one level"
                      tal:attributes="src string:${root_url}/globals/up_level.gif" />
                  </a>
                  <a class="top"
                    title="up to containing publication: alt-["
                    accesskey="["
                    tal:condition="not: model_is_root"
                    tal:attributes="href python: model_is_publication and (containing_publication.absolute_url() + '/edit/' + vein_id) or (publication.absolute_url() + '/edit/' + vein_id)">
                    <img width="9"
                    height="9"
                    border="0"
                    alt="Up to containing Publication"
                    tal:attributes="src python: model_is_publication and ('%s/globals/up_publication.gif' % root_url) or ('%s/globals/up_tree.gif' % root_url)" />
                  </a>
                  <a class="normal"
                    style="padding: 0 1em;"
                    tal:content="breadcrumb_vein"
                    tal:attributes="href vein_id">
                    vein
                  </a>
                </th>
              </tr>
            </thead>
            <tbody tal:condition="model/implements_container">
              <metal:define-slot define-slot="sidebar">
                cached sidebar inserted with template variables
              </metal:define-slot>
            </tbody>
          </table>
</metal:define-macro>


<tal:block replace="nothing">
  _______ macro content_sidebar _______
  _______ renders the header of the sidebar navigation _______
  _______ only for content _______
  _______ DEPRECATED, delete in next checkin _______
</tal:block>
<metal:block define-macro="content_sidebar">
  <table class="listing">
    <thead>
      <tr>
        <th class="top">
          <a class="up"
            href="../../edit/tab_edit"
            title="up one level: alt-]"
            accesskey="]"
            tal:attributes="href string:../../edit/${vein_id}">
            <img width="9"
              height="9"
              border="0"
              alt="Up one level"
              tal:attributes="src string:${root_url}/globals/up_level.gif" />
          </a>
          <a class="top"
            title="up to containing publication: alt-["
            accesskey="["
            tal:attributes="href string:${containing_publication/absolute_url}/edit/${vein_id}">
            <img width="9"
            height="9"
            border="0"
            alt="Up to containing Publication"
            tal:attributes="src string:${root_url}/globals/up_tree.gif" />
          </a>
          <a class="normal"
            style="padding: 0 1em;"
            title="reload screen"
            tal:attributes="href vein_id"
            tal:content="string:${breadcrumb_vein}">
            vein
          </a>
        </th>
      </tr>
    </thead>
  </table>
</metal:block>

</html>
