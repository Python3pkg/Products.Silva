<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html tal:omit-tag=""
  tal:define="
    view here;
    model request/model;
    root_url model/get_root_url;
    title model/get_title_editable;
    vein string:editor;
    active_tab string:../../edit/tab_access_groups;
    parent_screen_name string:groups;
    has_access here/has_change_access_permission;">
  
<table class="columns columns3">
  <tbody>
    <tr>
      <tal:block replace="nothing">
        _____________________ sidebar _____________________
      </tal:block>
      <td class="left"
        tal:define="template_id string:tab_edit">
        <tal:block replace="nothing">
          ______________ parent screen link ______________
        </tal:block>
        <metal:block use-macro="view/macro_vein_navigation/macros/parent" />
        <tal:block replace="nothing">
          ______________ vein navigation ______________
        </tal:block>
        <metal:block use-macro="view/macro_vein_navigation/macros/vein" />
      </td>

      <tal:block replace="nothing">
        _____________________ main _____________________
      </tal:block>
      <td class="main">

<table class="listing">
  <thead>
    <tal:block replace="nothing">
      ______________ vein + title row ______________
    </tal:block>
    <tr>
      <td class="top"
        colspan="3">
        <h2>
          <img tal:replace="structure python:view.render_icon(model)" />
          <span style="text-transform:lowercase;"
            tal:content="model/meta_type">Meta type</span> 
            &#xab;<tal:block content="model/get_title_or_id" />&#xbb;
        </h2>
      </td>
    </tr>
    <tr class="top-controls">
      <td>
        <h3>
          IPs and IP ranges
        </h3>
      </td>
    </tr>
  </thead>

  <tbody tal:condition="has_access">
    <form action="."
      method="POST"
      tal:define="ipranges model/listIPRanges"
      tal:condition="model/isValid | nothing">
      <tr>
        <th tal:condition="ipranges">
          settings
        </th>
      </tr>
      <tal:block replace="nothing">
        ______________ group listing ______________
      </tal:block>
      <tal:block repeat="iprange ipranges">
        <tr valign="top"
          tal:define="iterate repeat/iprange/odd;"
          tal:attributes="class python: iterate and 'odd' or 'even'">
          <td>
            <input class="warning-checkbox"
              name="ipranges:list"
              type="checkbox"
              value="iprange"
              tal:attributes="value iprange"
            />
            &nbsp;
            <label tal:content="iprange"
              tal:attributes="for iprange">
              group name
            </label>
          </td>
        </tr>
      </tal:block>
      <tr class="even"
        tal:condition="not:ipranges">
        <td>
          <i i18n:translate="ip_group_does_not_contain_any_ips">
            This IP Group does not contain any IPs.
          </i>
        </td>
      </tr>
      <tr class="controls">
        <td>
          <input class="warning"
            type="submit"
            name="remove_iprange_from_ipgroup:method"
            value="remove ranges"
            title="remove range(s) from this ip group: alt-r"
            accesskey="r"
            i18n:attributes="title value"
            onClick="return confirm('Really remove?')"
            tal:condition="ipranges"
          />
        </td> 
      </tr>
    </form>
  </tbody>
</table>

<tal:block replace="nothing">
  _____________________ add ip _____________________
</tal:block>
<form method="POST" 
  action="." 
  enctype="multipart/form-data">
  <table class="listing">
    <thead>
      <tr class="top-controls">
        <td colspan="3">
          <h3 i18n:translate="add_ip_address">
            add an IP address
          </h3>
        </td>
      </tr>
    </thead>
    <tbody>
      <tr class="even">
        <td class="align-right"
          width="10%">
          ip range<span class="warning">*</span>
        </td>
        <td style="width: 20em;">
          <input style="width: 100%;"
            type="text" 
            name="iprange"
          />
        </td>
        <td>
          Can be: IP, IP-IP, IP/Netmask (10.1.1.1, 10.1.1.1-10.1.1.255, 
          10.1.1.0/24, 10.1.1.0/255.255.255.0)
        </td>
      </tr>
    </tbody>
    <tfoot>
      <tr class="controls">
        <td class="align-right"
          colspan="3">
        <input class="button"
          type="submit"
          value="add ip range"
          name="add_iprange_to_ipgroup:method"
          title="add an ip or an ip range"
          />
        </td>
      </tr>
    </tfoot>
  </table>
</form>

<tal:block condition="not:model/isValid | nothing">
  "Things to do when virtual groups is not in it original location"
</tal:block>

      </td>

      <tal:block replace="nothing">
        _____________________ right column _____________________ 
      </tal:block>
      <td class="right">
        <tal:block condition="has_access">
          <tal:block replace="nothing">
            ______________ ip groups clipboard ______________
          </tal:block>
          <tal:define define="
            global group_meta_type string:Silva IP Group;
            global group_type string:ip;
            ">
            <metal:block use-macro="view/macro_groups_listing/macros/ip_groups_listing">
              <metal:block fill-slot="listing_actions">
                <input class="button"
                  name="copy_ipranges_from_ipgroups:method"
                  title="transfer ip(s) to this ip group"
                  type="submit"
                  value="copy ips to ip group" 
                  i18n:attributes="title value"
                />
              </metal:block>
            </metal:block>
          </tal:define>
        </tal:block>
      </td>
    </tr>
  </tbody>
</table>

</html>