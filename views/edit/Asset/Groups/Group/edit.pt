<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html tal:omit-tag=""
  tal:define="
    view here;
    model request/model;
    root_url model/get_root_url;
    title model/get_title_editable;
    vein string:edit;
    active_tab string:../../edit/tab_access_groups;
    parent_screen_name string:groups;
    has_access here/has_change_access_permission;"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  i18n:domain="silva">
  
<table class="columns columns3">
  <tbody>
    <tr>
      <tal:block replace="nothing">
        _____________________ sidebar _____________________
      </tal:block>
      <td class="left"
        tal:define="template_id string:tab_edit">
        <tal:block replace="nothing">
          ______________ parent screen link ______________
        </tal:block>
        <metal:block use-macro="view/macro_vein_navigation/macros/parent" />
        <tal:block replace="nothing">
          ______________ vein navigation ______________
        </tal:block>
        <metal:block use-macro="view/macro_vein_navigation/macros/vein" />
      </td>

      <tal:block replace="nothing">
        _____________________ main _____________________
      </tal:block>
      <td class="main">

<table class="listing">
  <thead>
    <tal:block replace="nothing">
      ______________ vein + title row ______________
    </tal:block>
    <tr>
      <td class="top"
        colspan="3">
        <h2>
          <img tal:replace="structure python:view.render_icon(model)" />
          <span style="text-transform:lowercase;"
            tal:content="model/meta_type">Meta type</span> 
            &#xab;<tal:block content="model/get_title_or_id" />&#xbb;
        </h2>
      </td>
    </tr>
    <tr class="top-controls">
      <td>
        <h3 i18n:translate="">
          group members
        </h3>
      </td>
    </tr>
  </thead>

  <tbody tal:condition="has_access">
    <form action="."
      method="POST"
      tal:define="userids model/listUsers"
      tal:condition="model/isValid | nothing">
      <tr>
        <th tal:condition="userids"
          i18n:translate="">
          Username
        </th>
      </tr>
      <tal:block replace="nothing">
        ______________ group listing ______________
      </tal:block>
      <tal:block repeat="userid userids">
        <tr valign="top"
          tal:define="
            iterate repeat/userid/odd;
            member python:model.sec_get_member(userid)"
          tal:attributes="class python: iterate and 'odd' or 'even'">
          <td>
            <input class="warning-checkbox"
              name="userids:list"
              type="checkbox"
              value="userid"
              tal:attributes="
                value member/userid;
                id member/userid"
            />
              &nbsp;
              <label tal:content="member/fullname"
                tal:attributes="for member/userid">
                username
              </label>
          </td>
        </tr>
      </tal:block>
      <tr class="even"
        tal:condition="not:userids">
        <td>
          <i i18n:translate="">
            This group does not have any members.
          </i>
        </td>
      </tr>
      <tr class="controls">
        <td>
          <input class="warning"
            type="submit"
            value="remove users"
            name="remove_users_from_group:method"
            title="remove selected user(s) from this group: alt-r"
            accesskey="r"
            i18n:attributes="title;value"
            onClick="return confirm('Really remove?')"
            tal:condition="userids"
          />
        </td> 
      </tr>
    </form>
  </tbody>
</table>

<tal:block condition="not:model/isValid | nothing" i18n:translate="">
  "Things to do when virtual groups is not in it original location"
</tal:block>

      </td>

      <tal:block replace="nothing">
        _____________________ right column _____________________ 
      </tal:block>
      <td class="right">
        <tal:block condition="has_access">
          <tal:block replace="nothing">
            ______________ user clipboard ______________
          </tal:block>
          <metal:block use-macro="view/macro_user_lookup_clipboard/macros/clipboard">
            <metal:block fill-slot="clipboard_actions">
              <input class="button"
                name="add_users_to_group:method"
                type="submit"
                value="add to group" 
                title="add selected users to this group"
                accesskey="a"
                i18n:attributes="title;value"
              />
            </metal:block>
          </metal:block>
          <br />
          <tal:block replace="nothing">
            ______________ groups clipboard ______________
          </tal:block>
          <tal:define define="
            global group_meta_type string:Silva Group;
            global group_type string:user;
            ">
            <metal:block use-macro="view/macro_groups_listing/macros/normal_groups_listing">
              <metal:block fill-slot="listing_actions">
                <input class="button"
                  name="add_users_from_group_to_group:method"
                  type="submit"
                  value="copy users from group(s)" 
                  title="transfer members from selected groups"
                  accesskey="c"
                  i18n:attributes="title;value"
                />
              </metal:block>
            </metal:block>
          </tal:define>
        </tal:block>
      </td>
    </tr>
  </tbody>
</table>

</html>
