<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html tal:omit-tag=""
  lang="en"
  xml:lang="en"
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:notal="http://www.infrae.com/silva/notal"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  tal:define="
    global vein string:add;
    global active_tab string:tab_edit;
    global lookup_mode request/lookup_mode | python:0;
    global return_url request/return_url | python:'';
    global use_macro python: (lookup_mode and [here.macro_no_tabs] or [here.macro_index])[0]"
  i18n:domain="silva">

<metal:block metal:use-macro="use_macro/macros/master">
<metal:block fill-slot="main">
<script type="text/javascript" 
  tal:content="structure python:here.focus_editor('field_object_id')" />

<div class="focus-rectangle">
<form method="POST"
  action="add_object_submit"
  name="focusbox"
  enctype="multipart/form-data">
<input type="hidden" name="meta_type" tal:attributes="value request/meta_type" />
<input type="hidden" name="lookup_mode:int" value="0"
  tal:attributes="value lookup_mode" />
<input type="hidden"
  name="return_url"
  tal:attributes="value return_url"
/>
<table class="listing">
<thead>
  <tr>
    <td class="top"
      colspan="3">
    <h2>
      <img tal:replace="structure python:context.render_icon_by_meta_type(request.meta_type)" />
      <tal:block i18n:translate="">
        create 
        <tal:block replace="python: request.meta_type == 'Silva AutoTOC' and 'Silva Automatic Table of Contents' or request.meta_type" 
                    i18n:name="TOC_or_meta_type"/>
      </tal:block>
    </h2>
    </td>
  </tr>
</thead>

<tbody>
  <tr>
    <th class="align-right"
      i18n:translate="">
      aspect
    </th>
    <th style="width:50%;"
      i18n:translate="">
      content
    </th>
    <th i18n:translate="">
    notes
    </th>
  </tr>
  <tal:repeat repeat="field here/form/get_fields">
  <tal:define define="iterate repeat/field/odd">
  <tr tal:attributes="class python:iterate and 'odd' or 'even'">
    <td class="align-right">
      <label tal:content="structure field/title"
        tal:attributes="
          for string:field_${field/id};
          accesskey python:field.id == 'file' and 'f' or nothing;
        ">
        title
      </label><span class="warning"
        tal:condition="field/is_required">*</span>
    </td>
    <td>
      <input tal:replace="structure python:field.render_from_request(request)" />
    </td>
    <td>
      <tal:block tal:content="structure field/description" i18n:translate="">note</tal:block>&nbsp;
    </td>
  </tr>
  </tal:define>
  </tal:repeat>
</tbody>

<tfoot>
  <tr class="controls">
    <td class="align-right"
      colspan="3">
      <input class="cancel"
        style="float:left;"
        type="submit"
        name="add_cancel"
        value="cancel"
        title="access key: alt-c"
        accesskey="c"
        i18n:attributes="value;title;"
      />
      <input class="button"
        type="submit"
        name="add_submit"
        value="save"
        title="access key: alt-s"
        accesskey="s"
        i18n:attributes="value;title"
      />
      <tal:condition condition="python: not lookup_mode" >
      <input class="button"
        type="submit"
        name="add_edit_submit"
        value="save + edit"
        title="access key: alt-e"
        accesskey="e"
        tal:attributes="value python:test(here.id in ('Folder','Publication'), 'save + enter', 'save + edit')"
        i18n:attributes="value;title"
      />
      </tal:condition>
    </td>
  </tr>
</tfoot>
</table>
</form>

</metal:block>
</metal:block>
</html>
