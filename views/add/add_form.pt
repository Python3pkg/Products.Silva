<tal:block define="
  global active_tab string:tab_edit;
  global location string:Add;
  " />

<!-- ___________________________ start index_html ___________________________ -->
<html metal:use-macro="here/macro_index/macros/master">

<div class="margins" metal:fill-slot="main">
<!-- ___________________________ start index_html/slot main ___________________________ -->

<h2>Add new <span tal:replace="request/meta_type" /></h2>
<script type="text/javascript" language="JavaScript">
<!--
// Called from body onload() method which is defined in the
// macro_index. It focusses the appropiate form field.
function focus_editor() {
  // Hardcoded path to form element. Needs improvement.
  if (document && document.focusbox && document.focusbox.field_object_id) {
      document.focusbox.field_object_id.focus();
    }
}
//-->
</script>
<form name="focusbox" action="add_object_submit" method="POST" enctype="multipart/form-data">
<input type="hidden" name="meta_type" tal:attributes="value request/meta_type" />
<table width="96%" cellspacing="0" cellpadding="5" border="0"
  tal:attributes="width container/table_width; cellspacing container/table_cellspacing;
                  cellpadding container/table_cellpadding; border container/table_border">
<tr>
<th align="left" colspan="2" width="7%">
Attributes
</th>
<th align="left">
Content
</th>
<th align="left">
Notes
</th>
</tr>

<fieldset tal:omit-tag=""
  tal:repeat="field here/form/get_fields">
<rowset tal:omit-tag=""
  tal:define="oddrow repeat/field/odd">

<tr class="focus" valign="top"
  tal:attributes="class python:test(oddrow, 'focus', 'focus-cycle')">
<td align="right" width="10%" tal:content="python:field['title']">
title
</td>
<td align="right" width="1%">
<span class="warning"
  tal:condition="python:field.is_required()">
*
</span>
<span tal:omit-tag=""
  tal:condition="not:python:field.is_required()">
&nbsp;
</span>
</td>
<td tal:content="structure python:field.render_from_request(request)">
<input type="text" />
</td>
<td class="leadedbody" width="40%" tal:content="structure string:${field/description}&nbsp;">
id: no spaces or special characters besides an underscore (_).
</td>
</tr>

</rowset>
</fieldset>

<tr class="controls">
<td colspan="2">
<input class="cancelbutton" type="button" name="cancel" value=" Cancel " onClick="history.back()" />
</td>
<td colspan="2" align="right">
<input class="button" type="submit" name="add_submit" value=" Add " />
&nbsp;&nbsp;<input class="button" type="submit" name="add_edit_submit" value=" Add and edit "
  tal:attributes="value python:test(here.id == 'Folder', ' Add and enter ', ' Add and edit ')" />
</td>
</tr>
</table>
</form>

</div>

</html>
