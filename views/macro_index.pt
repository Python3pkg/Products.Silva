<html metal:define-macro="master"
  tal:define="
    silva_root here/silva_root;
    view here;
    model request/model;
    ">
<head>
<title tal:content="structure python:model.get_title_html()">Title</title>
<link rel="shortcut icon" href="globals/favicon.ico | nothing"
  tal:attributes="href here/globals/favicon.ico/absolute_url | nothing" />
<link rel="stylesheet" href="globals/base.css"
  tal:attributes="href here/globals/base.css/absolute_url | nothing" />
<link rel="stylesheet" href="globals/silva.css"
  tal:attributes="href here/globals/silva.css/absolute_url | nothing" />
<link rel="stylesheet" href="frontend.css"
  tal:condition="python:template.id == 'tab_preview'"
  tal:attributes="href model/frontend.css/absolute_url | nothing" />
<script tal:replace="nothing"> 
  _______ application specific stylesheet extension _______ </script>
<link rel="stylesheet" href="ext_stylesheet"
  tal:condition="python:hasattr(here, 'extension_style_url')"
  tal:attributes="href python:here.extension_style_url()" />
<style tal:define="local_style view/local_style"
  tal:condition="local_style"
  tal:content="structure local_style | nothing">color container tabs green</style>
<meta http-equiv="Content-Script-Type" content="text/javascript" />
<script tal:replace="nothing"> _______ editor hooks _______ </script>
<script type="text/javascript" language="JavaScript"
  tal:condition="python: template.id == 'tab_edit_bxe'"
  tal:attributes="src container/bxe/js/bitfluxeditor.js/absolute_url | nothing">
</script>
<script type="text/javascript" language="JavaScript"
  tal:condition="python: template.id == 'tab_edit_xopus' and hasattr(container, 'xopus')"
  tal:attributes="src container/xopus/xopus/xopus.js/absolute_url | nothing">
</script>
<script type="text/javascript" language="JavaScript"
  tal:condition="python: template.id == 'tab_edit_eopro'"
  tal:content="python: template.tab_edit_eopro_js()">
</script>
</head>
<body leftmargin="0" rightmargin="0" topmargin="0" marginwidth="0" marginheight="0"
  tal:attributes="onload python: test(template.id == 'tab_edit_bxe',
    'BX_load(\'%s/bxe/bxe_config.xml\')' % (model.absolute_url()),
    'if (window.focus_editor) window.focus_editor()')">
<tal:block replace="nothing">Previous onload tests facilitate Bitflux editor support</tal:block>
<!-- ____________________________ start tabs ___________________________ -->
<tabs metal:use-macro="here/macro_tabs/macros/tabs" tal:omit-tag="">
  Tab bar plugs in here....
</tabs>
<!-- ____________________________ end tabs _____________________________ -->
<!-- __________________________ start feedback _________________________ -->
<tal:block
  define="type options/message_type | request/message_type | nothing;
          msg options/message | request/message | nothing"
  condition="type">
<div class="feedback" tal:condition="python:type == 'feedback'">
<span tal:replace="structure msg">message</span>&nbsp;&nbsp;<span tal:replace="string:(${here/service_utils/backend_now_to_str})">datetime</span>
</div>
<div class="alert" tal:condition="python:type == 'error'">
<span tal:replace="structure msg">message</span>
</div>
</tal:block>
<!-- __________________________ end feedback __________________________ -->
<!-- ____________________________ main start ___________________________ -->
<div metal:define-slot="main">
  Here the local content (a.k.a. "model") is inserted (this text will be replaced).
</div>
<!-- ____________________________ main ends ____________________________ -->
<!-- ___________________________ footer start __________________________ -->
<div style="clear: both;">

<span tal:replace="nothing"> _______ white space + jump to top _______ </span>
<table width="100%" cellspacing="0" cellpadding="0" border="0">
<tr tal:attributes="bgcolor python: template.id == 'tab_preview' and '#d1d4d8' or None">
<td width="2%">
<a href="#top" title="jump to top: alt-t"><img tal:attributes="src string:${silva_root}/globals/up_to_top_gray.gif" width="16" height="16" border="0" alt="jump to top" /></a>
</td>
<td align="right" colspan="3">
<tal:block condition="python: template.id == 'tab_preview'">
<span tal:replace="nothing"> _______ link to see page in public/local style, if in use _______ </span>
<div style="margin-right:2%;"><span class="widebody"><a tal:attributes="href string:${model/absolute_url}/preview_html" title="See the complete public layout: alt-;" accesskey=";" target="_blank">Presentation preview</a></span></div>
</tal:block>
</td>
<td width="2%">
<a href="#top" title="jump to top: alt-t" accesskey="t"><img tal:attributes="src string:${silva_root}/globals/up_to_top_gray.gif" width="16" height="16" border="0" alt="jump to top" /></a>
</td>
</tr>

<span tal:replace="nothing"> _______ border _______ </span>
<tr>
<td colspan="5" class="tab-bg"><img tal:attributes="src string:${silva_root}/globals/pixel.gif" width="2" height="1" /></td>
</tr>

<span tal:replace="nothing"> _______ page info _______ </span>
<tr>
<td class="tab-up" width="2%">
<img tal:attributes="src string:${silva_root}/globals/pixel.gif" width="1" height="11" />
</td>
<td class="tab-up" width="30%">
<span class="breadcrumb">
Contact: <a tal:attributes="href python:'mailto:%s'%getattr(model,'contact_email',None)"><span class="index-link" tal:content="model/contact_name|string:no name"></span></a>
</span>
</td>
<td class="tab-up" align="center" width="36%">
<span class="breadcrumb"
  tal:condition="python: getattr(model, 'contact_email', '') != ''">
  Email:
  <a tal:attributes="href python:'mailto:%s'% getattr(model, 'contact_email', nothing)"><span class="index-link" tal:content="model/contact_email | nothing"></span></a>
</span>
&nbsp;&nbsp;
</td>
<td class="tab-up" align="right" width="30%">
<span class="breadcrumb">
<a title="Leave Silva and see the published version: alt-:" accesskey=":"
  tal:attributes="href model/absolute_url">See public version</a>
</span>
</td>
<td class="tab-up" width="2%">
<img tal:attributes="src string:${silva_root}/globals/pixel.gif" width="1" height="1" />
</td>
</tr>

<span tal:replace="nothing"> _______ user info _______ </span>
<tr valign="bottom"
  tal:define="userid request/AUTHENTICATED_USER/getUserName">
<td class="footer" width="2%">
<img tal:attributes="src string:${silva_root}/globals/pixel.gif" width="1" height="12" />
</td>
<td class="footer" width="30%">
<a class="footer" title="Change your settings: alt-~" accesskey="~" href="#"
  tal:attributes="onclick string: userWindow = window.open('service_resources/Silva/edit_member', 'userWindow', 'width=450,height=350,resizable=no');; userWindow.focus();; return false;;">
  <img tal:attributes="src string:${silva_root}/globals/user.gif" width="8" height="9" border="0"/>
  User settings
</a>
</td>
<td class="footer" align="center" width="36%">
<a class="footer" tal:attributes="href string:public/request_roles?last_url=${model/absolute_url}" title="Request an additional role in this location: alt-," accesskey=","
  tal:condition="python: hasattr(view, 'service_members') and view.service_members.allow_subscription()">
  Request access
</a>
</td>
<td class="footer" align="right" width="30%">
<a class="footer" href="logout" title="Logout of Silva: alt-q" accesskey="q">Logout&nbsp;<span tal:condition="here/get_user_role" tal:replace="structure string:${here/get_user_role}&nbsp;" /><span tal:replace="userid" /></a>
</td>
<td class="footer" width="2%">
<img tal:attributes="src string:${silva_root}/globals/pixel.gif" width="1" height="1" />
</td>
</tr>

<span tal:replace="nothing"> _______ border _______ </span>
<tr>
<td colspan="5" class="tab-bg"><a name="bottom"><img tal:attributes="src string:${silva_root}/globals/pixel.gif" width="2" height="2" border="0"/></a></td>
</tr>
</table>
<!-- served by <tal:block replace="string:(page served by ${request/HTTP_HOST})" /> -->

</div>
<!-- ___________________________ footer ends ___________________________ -->
</body>
</html>
