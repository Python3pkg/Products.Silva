<html metal:use-macro="here/layout_macro.html/macros/layout">
  <head>
    <style media="all"
      type="text/css"
      metal:fill-slot="style">
      @import url(globals/plone.css);
      @import url(globals/ploneCustom.css);
    </style>
    <title>Search results</title>
  </head>
  <body>
    <metal:block fill-slot="main"
      tal:define="
        view here;
        content_type here/set_content_type;

        model request/model;
        icon python:view.render_icon(model);          

        results view/perform_search;
        batch python:view.getBatch(results);"
      >
      <tal:block define="dummy here/set_content_type" />
      <form method="POST" name="form" action=".">

      <tal:block tal:condition="results">    
        <table class="listing" cellspacing="0" cellpadding="3" border="0" width="100%">
          <thead>
            <tr class="controls">
              <td class="rowhead" align="left">
                <tal:block condition="request/previous_batch_url | nothing">
                  [<a href="previousbatch" tal:attributes="href request/previous_batch_url">
                  &lt;&lt; Previous
                  </a>]
                </tal:block>
              </td>
              <td class="rowhead" nowrap="1">
                Showing results
                <tal:block replace="batch/start" />
                to
                <tal:block replace="batch/end" />.
              </td>
              <td class="rowhead" align="right">
                <tal:block condition="request/next_batch_url | nothing">
                  [<a href="nextbatch" tal:attributes="href request/next_batch_url">
                  Next &gt;&gt;
                  </a>]
                </tal:block>
              </td>
            </tr>
          </thead>
          <tbody>
            <tal:block repeat="item batch">
              <tal:block
                tal:define="iterate repeat/item/even;">
                <tr valign="top"
                  tal:attributes="class python: iterate and 'even' or 'odd'">
                  <td>
                  </td>
                  <td
                    tal:define="
                      doc item/getObject;
                      url doc/silva_object_url | string:#;
                      ">
                    <a href="#"
                      tal:content="string:${doc/get_title_or_id}"
                      tal:attributes="href url" />
                  </td>
                  <td>
                  </td>
                </tr>
              </tal:block>
            </tal:block>
          </tbody>
          <tfoot>
            <tr class="controls">
              <td class="rowhead" align="left">
                <tal:block condition="request/previous_batch_url | nothing">
                  [<a href="previousbatch" tal:attributes="href request/previous_batch_url">
                  &lt;&lt; Previous
                  </a>]
                </tal:block>
              </td>
              <td class="rowhead" nowrap="1">
              </td>
              <td class="rowhead" align="right">
                <tal:block condition="request/next_batch_url | nothing">
                  [<a href="nextbatch" tal:attributes="href request/next_batch_url">
                  Next &gt;&gt;
                  </a>]
                </tal:block>
              </td>
            </tr>
          </tfoot>
        </table>
      </tal:block>

    </metal:block>
  </body>
</html>
