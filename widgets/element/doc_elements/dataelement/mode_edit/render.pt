<metal:block use-macro="container/macro_edit_view/macros/edit_view">
  <metal:block fill-slot="edit_input">
    <script type="text/javascript"
      tal:content="structure here/asset_reference.js" />  
    <div class="margins">
      <table cellpadding="2" border="0" width="100%">
        <tr>
          <td colspan="1" width="10%">
            <input type="button" class="button" name="" value="Get data source reference"
              tal:attributes="onclick python:'getAssetReference(\'%s/edit/asset_lookup?filter=SQL%%20Data%%20Source\', \'_reference_\', \'focusbox\', \'path\');;return false;;' % here.get_start_container().absolute_url();" />
          </td>
          <td colspan="2">  
            <input style="width:100%;" type="text" name="path" value=""
              tal:attributes="value python:node.output_convert_editable(node.getAttribute('path'));"  />
          </td>
        </tr>
        <tal:block
          define="form here/get_form"
          condition="form">
          <tr>
            <td colspan="1">
              Parameters:
            </td>
            <td colspan="2">  
              &nbsp;
            </td>
          </tr>
          <tr>
            <th align="left">
              Description
            </th>
            <th align="left">
              Name
            </th>
            <th align="left">
              Value
            </th>
          </tr>
          <tal:block repeat="field form/get_fields">
            <tal:block
              define="oddrow repeat/field/odd">
              <tr class="focus" valign="top"
                tal:attributes="class python:test(oddrow, 'focus', 'focus-cycle')">
                <td class="leadedbody" width="40%" tal:content="structure string:${field/description}&nbsp;">
                  description
                </td>
                <td align="right" width="10%" tal:content="python:field['title']">
                  parameter
                  <span class="warning">*</span>
                </td>
                <td tal:content="structure python:field.render_from_request(request)">
                  <input type="text" />
                </td>
              </tr>
            </tal:block>
          </tal:block>
        </tal:block>
      </table>
    </div>
  </metal:block>
  <metal:block fill-slot="edit_notes">
    <ul class="tips">
      <li>
        Use the "Get data source reference" button to locate a data source
      </li>
      <li>
        <span class="warning">Hit "Save" to update the parameter form.</span>
      </li>
      <li>
        Fill in the parameters (if available).
      </li>
    </ul>
  </metal:block>
</metal:block>