<metal:block use-macro="container/macro_edit_view/macros/edit_view">

<metal:block fill-slot="edit_input">
<tal:block define="global code_objects here/get_code_objects" />

<tal:block condition="not: code_objects">
  &nbsp;No code elements are available.<br />
  &nbsp;They should be located in a (non-silva) folder in the ZMI named <tt>code_source</tt>.<br />
</tal:block>

<tal:block tal:condition="code_objects">
  &nbsp;Available code elements:<br />
  <select name="path">
    <tal:block tal:define="selected_path python:node.output_convert_html(node.getAttribute('path'))" 
               repeat="obj code_objects">
      <option tal:define="path python:'/' + obj.absolute_url(1)"
              tal:attributes="value path; selected python:test(path == selected_path, 'selected', None)" 
              tal:content="python:'%s (/%s)' % (obj.title_or_id(), obj.absolute_url(1))" />
    </tal:block>
  </select>
</tal:block>
</metal:block>

<metal:block fill-slot="edit_notes">
<ul class="tips">
  <li>Select the code to be executed when document is displayed.</li>
  <li><b>Tip:</b> Tab to the exit button or alt-e.</li>
</ul>
</metal:block>

</metal:block>
