<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en"
  xml:lang="en"
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  i18n:domain="silva">
<metal:block define-macro="tabs">
<tal:block define="
  tabs here/get_authorized_tabs;
  active_tab active_tab | nothing;
  screen_id screen_id | template_id | template/id;
  ">
<!-- ______________ Breadcrumb space ______________ -->
  <div class="pathbar">
    <div style="float: right; margin-right: 5px;">
      <a class="idea"
        href="globals/reference"
        title="Silva info: alt-|"
        accesskey="|"
        i18n:attributes="title"
        >
        Silva
      </a>
    </div>
    <a class="normal"
      title="Silva top: alt-/"
      accesskey="/"
      tal:attributes="href string:$root_url/edit/tab_edit"
      i18n:attributes="title"
      >
      <img alt="Silva"
        height="14"
        width="14"
        border="0"
        tal:attributes="src string:$root_url/globals/silva_emblem.png"
      />
    </a>
    <a name="top"> </a>
    <tal:block tal:repeat="breadcrumb model/@@absolute_url/breadcrumbs">
      <span class="breadcrumb-item">
      <span class="breadcrumb-sep" title="display direct-tab access for breadcrumb item"
         i18n:translate="title">
         &raquo;
      </span>
      <a tal:define="roles python:breadcrumb['obj'].sec_get_all_roles()"
        tal:attributes="href string:${breadcrumb/url}/edit/${screen_id}"
        tal:omit-tag="python: not len([val for val in context.roles_helper() if val in roles])"
        tal:content="breadcrumb/name">
        <!--<span tal:replace="python:'%s%s'%(breadcrumb['name'],item.id=='index' and ' (index)' or '')" />-->
      </a>
      </span>
    </tal:block>
    <span tal:replace="nothing"><!-- _______ manage link _______ --></span>
    <tal:block condition="python:user.has_role(['Manager'], object=model)">
      <a class="manage"
        title="Zope manage_main: alt-."
        accesskey="."
        tal:attributes="href python:'%s/manage_main' % url"
        i18n:attributes="title"
        i18n:translate=""
      >
        manage...
      </a>
    </tal:block>
  </div>
  <span tal:replace="nothing"><!-- _______ help link _______ --></span>
  <a class="normal"
    title="Silva access keys: alt-?"
    accesskey="?"
    tal:condition="exists:here/help_url"
    tal:attributes="href string:${here/help_url}"
    i18n:attributes="title"
    ></a>

<!-- ______________ Matrix tabs ______________ -->
<div class="tabs">
  <span tal:replace="nothing"><!-- _______ public link _______ --></span>
  <a class="transportlet"
    style="float:right"
    title="Leave Silva and view the public page: alt-;"
    accesskey=";"
    tal:attributes="href string:${model/@@absolute_url}"
    i18n:attributes="title"
    i18n:translate="">
    view...
  </a>
  <tal:repeat tal:repeat="item tabs">
    <tal:define define="
      tab_info python:here.get_tab_info(item);
      is_selected_tab python:tab_info['tab_id'] in [screen_id, active_tab];
      top_key tab_info/toplink_accesskey | nothing;
      tab_key tab_info/tab_accesskey | nothing;
      up_key tab_info/uplink_accesskey | nothing;
      ">
      <a class="left"
        tal:condition="tab_info/toplink_url"
        tal:attributes="href tab_info/toplink_url;
          title tab_info/toplink_title;
          accesskey top_key;"
          i18n:attributes="title"
          >
        <img border="0"
           height="9"
           width="9"
           tal:attributes="
             src python:publication == model and '%s/globals/up_publication.gif' % root_url or '%s/globals/up_tree.gif' % root_url;
             alt string:style_image;
        "/>
      </a>
      <a tal:content="structure string:${tab_info/tab_name}"
        tal:attributes="href tab_info/tab_url;
          class python:is_selected_tab and ((active_tab and active_tab != 'tab_preview') and 'tab recede' or 'tab selected') or 'tab';
          title tab_info/tab_title;
          accesskey tab_key;"
          i18n:translate=""
          i18n:attributes="title"
        >
        tab name
      </a>
      <a class="right"
        tal:condition="tab_info/uplink_url"
        tal:attributes="href tab_info/uplink_url;
          title tab_info/uplink_title;
          accesskey up_key;
          "
        i18n:attributes="title"
        >
        <img border="0"
           height="9"
           width="9"
           tal:attributes="src python: '%s/globals/up_level.gif' % root_url;
             alt string:level_up_image;"
        />
      </a>
      <div class="air"> </div>
    </tal:define>
  </tal:repeat>

</div>

<div class="flowbar"></div>

</tal:block>
</metal:block>
</html>
