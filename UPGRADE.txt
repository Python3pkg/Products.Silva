Copyright (c) 2002 Infrae. All rights reserved.
See also LICENSE.txt

Meta::

  Valid for:  Silva 0.8.6
  Author:     Martijn Faassen
  Email:      faassen@infrae.com
  CVS:        $Revision: 1.19 $

Upgrading Silva 0.8.5 to 0.8.6

  This document applies to upgrading Silva only; if you are newly
  installing Silva please look at 'INSTALL.txt'.

  NOTE: It makes of course sense to make a backup of Silva before
  trying to upgrade!

  NOTE: We have not tested an upgrade from versions before 0.8.5 to
  0.8.6 directly; things will likely break if you try. To be safe you
  could first upgrade to 0.8.5 before upgrading to 0.8.6 (see the
  instructions in Silva 0.8.5 for more information).

  Silva Filesystem Products

    In order to upgrade to 0.8.6 you need a new version of Silva
    (0.8.6), Formulator (1.3.0) and XMLWidgets (0.8.3). Download the
    new versions here:

      * "Silva-0.8.6.tgz":http://www.zope.org/Members/faassen/Silva/Silva-0.8.6.tgz
  
      * "Formulator-1.3.0.tgz":http://www.zope.org/Members/faassen/Formulator/Formulator-1.3.0.tgz

      * "XMLWidgets-0.8.3.tgz":http://www.zope.org/Members/faassen/XMLWidgets/XMLWidgets-0.8.3.tgz
    
    To upgrade, remove the Silva, Formulator and XMLWidgets
    directories from your 'Products' directory first. Then unpack the
    new files you downloaded.

    There is also a *new* requirement for Silva, called FileSystemSite. This
    product will help making installation and upgrades of Silva easier:

     * "FileSystemSite-1.1.tgz":http://www.zope.org/Members/k_vertigo/Products/FileSystemSite/FileSystemSite-1.1.tgz

    To install it, just unpack the 'FileSystemSite-1.1.tgz' file into
    your 'Products' directory.

    ParsedXML does not have to be updated for this upgrade. Groups
    also does not require an upgrade.

    If you are using Silva's LDAP support (turned off by default), you
    should consult the section in 'INSTALL.txt' to see how to
    configure the newly Silva product to use this again.

    Restart Zope to make the new product code take effect. Now go on
    to the next step.

  Upgrading Silva

    Since version 0.8.6, Silva does not need a separate installation
    of a .zexp file. All Silva code is now distributed in the main
    Silva product. Upgrade code is also included. To trigger this
    upgrade, please type a URL like this into the location bar of your
    browser:

       http://path/to/silva/upgrade_silva

    This will call 'upgrade_silva' in your Silva root. This should
    take care of the upgrade. Your old Silva root will still be
    retained with '_085' added to its id. If you are satisfied there
    is nothing from it that you want to retain you can safely remove
    it.

  Page templates for presentation of public views
    
    The upgrade will likely carry new default versions of the page
    templates and style sheets used for presentation of the public
    website. You can install these examples in your Silva root by
    going to 'service_extensions' in the Silva Root and pressing the
    'install default layout' button.

    Doing this won't overwrite your public layout code; the only thing
    overwritten will be whatever in the current 'default_' objects, if
    any exist. You can then look at this code for examples. If you're
    satisfied with their contents you can also rename them to versions
    without the 'default_' prefix and start using them.
 
  What the upgrade code does.

    'upgrade_silva' will:

      * rename your old silva root, adding'_085' to its id
        (i.e. 'silva_085' if you installed it as 'silva').

      * create a new silva root with the original id (i.e. 'silva').
        Services etc will be automatically installed, just like 
        what would happen if you install a silva root by hand.

      * Copy over all the content from the old root into the new 
        version.

      * Copy over some other configuration details.


  Upgrading Custom Content Types.

    If you have custom content types in a separate Zope Product,
    you will need to export the views in the 'service_view_registry' to
    the file system and register them with the new views structure.
    There is detailed information about how to achieve this
    in the docs/Filesystem.stx

    