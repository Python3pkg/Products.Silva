Copyright (c) 2002 Infrae. All rights reserved.
See also LICENSE.txt

Meta::

  Valid for:  Silva 0.8.3
  Author:     Martijn Faassen
  Email:      faassen@infrae.com
  CVS:        $Revision: 1.8 $

Upgrading Silva 0.8 to 0.8.3

  This document applies to upgrading Silva only; if you are newly
  installing Silva please look at 'INSTALL.txt'.

  NOTE: It makes of course sense to make a backup of Silva before
  trying to upgrade!

  WARNING: Before upgrading Silva at all, **please remove** all Course
  objects. Course objects are **not supported by** the core Silva release
  0.8.3 and if you don't remove them, Silva will **not** work properly.

  After installing there is no good way to remove the broken course
  objects. Instead of a course object there is now a demo object which
  demonstrates how to mix structured content and data fields.

  Silva Filesystem Products

    First you need to upgrade the underlying Silva product and the
    XMLWidgets product. Download the new versions here:

      * "Silva-0.8.3.tgz":http://www.zope.org/Members/faassen/Silva/Silva-0.8.3.tgz
  
      * "XMLWidgets-0.8.1.tgz":http://www.zope.org/Members/faassen/XMLWidgets/XMLWidgets-0.8.1.tgz

    The other required products (Formulator and ParsedXML) do not have
    to be updated.

    Remove the 'Silva' and 'XMLWidgets' directories in your Zope's
    Products directory (usually this is 'lib/python/Products' in your
    Zope install). Now unpack 'Silva-0.8.3.tgz' and
    'XMLWidgets-0.8.1.tgz'.

    If you are using Silva's LDAP support (turned off by default), you
    should consult the section in 'INSTALL.txt' to see how to
    configure the newly Silva product to use this again.

    Restart Zope to make the new products take effect.

  Silva services (ZODB)
    
    Next, you need 'silva_upgrade_0.8.3.zexp.gz', which can be found
    here:

      * "silva_upgrade_0.8.3.zexp.gz":http://www.zope.org/Members/faassen/Silva/silva_upgrade_0.8.3.zexp.gz

    You do not need 'silva-0.8.3.zexp.gz', as you are upgrading, not
    installing from scratch.

    Unpack 'silva-0.8.3.zexp.gz' and place it in your Zope's 'import'
    directory. Now import it into the same folder where you installed
    silva previously (i.e as a sibling to the silva root, not into the
    silva root itself). Usually this means importing it into your
    Zope's root, if you installed silva there. 

    You should now have a folder 'silva_upgrade_0.8.3'. This folder
    contains a script to upgrade your Silva install, called
    'upgrade_from_0.8_to_0.8.3'. If you want to know in detail what it
    does before executing it, see the section below descripting this.

    Enter the 'silva_upgrade_0.8.3' folder and execute the script
    'upgrade_from_0.8_to_0.8.3', by going to its 'Test' tab. It will
    ask for a 'silva_root_id'; fill in the name of your silva root --
    usually this is just 'silva'. Then click on 'Run
    script'. Upgrading should now proceed. This will take a while.

    After it is done, your Silva install should be updated, except the
    page templates in the Silva Root dealing with the public layout
    (as you may have changed them). See the next section for more
    information on this.
    
    After the upgrade, you can safely remove 'service_course_editor' and
    'service_course_viewer', as they are not in use anymore.

  Page templates for presentation of public views
    
    The upgrade will have installed new default versions of the page
    templates used for presentation of the public website, prefixed
    with 'default_', i.e. 'default_content.html',
    'default_layout_macro.html', 'default_standard_error_message' and
    'default_frontend.css'. You may want to replace your own versions
    with these, if you haven't modified them. Note that these default
    versions contain some fixes compared to the versions delivered
    with the previous release, so it may be advisable to review them
    in any case.

  What the upgrade script does.

    The upgrade will automatically replace the installed services (non
    Silva content) with new versions. The upgrade script will keep a
    backup of the previous components in the 'backup' folder in the
    upgrade folder. If you suddenly miss some changes you made in the
    'service_view_registry' for instance, you should be able to find
    them in there.

    The upgrade will also install new default versions of the page
    templates used for presentation of the public website (see
    previous version).
  
    Next, the upgrade script will hunt down all your Silva Images and
    execute a fix to make their title display properly where it didn't
    under some circumstances.

    Finally, the upgrade will tweak the security settings of the Silva
    Root folder to set the permissions right (see the security tab in
    the ZMI).


