<html tal:omit-tag=""
  lang="en"
  xml:lang="en"
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:notal="http://www.infrae.com/silva/notal"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  tal:define="    
    model request/model;
    publication model;
    tree publication/get_container_tree;
    publication_url string:${publication/absolute_url}/edit/{__vein_id__};
">

<tr tal:replace="nothing"> 
  ______________ stack publication row ______________ 
</tr>
<tr>
  <td class="{__class__}"
    style="border-top:none;">
    <div class="normal"
      tal:attributes="onclick string:javascript:window.location='${publication/absolute_url}/edit/{__vein_id__}'">
      <a class="right" 
        title="slide to the publish screen"
        tal:attributes="href string:${publication/absolute_url}/edit/tab_status"
        i18n:attributes="title">
        &nbsp;
      </a>
    <a class="icon"
      title="up to top contents of publication"
      tal:attributes="href string:${publication/absolute_url}/edit/{__vein_id__};"
      i18n:attributes="title">
      <img tal:replace="structure python:here.render_icon(model.get_publication())" />
    </a>
    <a class="blacklink"
      href="top"
      title="up to top of publication"
      tal:attributes="href publication_url"
      tal:content="python: publication.get_short_title_editable() == '' and publication.id or publication.get_short_title_editable()"
       i18n:attributes="title">
      Publication
    </a>
    </div>
  </td>
</tr>

<span tal:replace="nothing">
  ______________ stack iteration ______________
</span>

<tal:block repeat="indent_item tree">
  <tr tal:define="
    item python:indent_item[1];
    indent python:indent_item[0];
    ">
    <td class="{__class__}"
      tal:define="
        item_url string:${item/absolute_url};
        title item/get_short_title_editable">
      <a class="right" 
        title="slide to the publish screen"
        tal:attributes="href string:${item_url}/edit/tab_status"
        i18n:attributes="title">
        &nbsp;
      </a>
      <a class="left" 
        title="slide to the contents screen"
        tal:attributes="href string:${item_url}/edit"
        i18n:attributes="title">
        &nbsp;
      </a>
      <div class="normal"
        tal:attributes="
          style python:'padding-left:'+str(indent * 10 + 8)+'px';
          onclick string:javascript:window.location='${item_url}/edit/{__vein_id__}'">
        <a class="icon"
          title="container"
          tal:attributes="href string:${item_url}/edit/{__vein_id__}">
          <img tal:replace="structure python:here.render_icon(item)" />
        </a>
        <a class="blacklink"
          tal:attributes="
            href string:${item_url}/edit/{__vein_id__};
            title string:id: ${item/id};"
          tal:content="title">
          title
        </a>
        <a class="normal"
          tal:attributes="
            href string:${item_url}/edit/{__vein_id__};
            title string:id: ${item/id};"
          tal:condition="python:title == ''"
          tal:content="item/id"
          i18n:translate="no_title">
            no title
        </a>
      </div>
    </td>
  </tr>
  <tr class="controls"
    style="height:0.1em"
    tal:condition="repeat/indent_item/end">
    <td>
    </td>
  </tr>
</tal:block>

</html>
