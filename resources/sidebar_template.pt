<html tal:omit-tag=""
  lang="en"
  xml:lang="en"
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:notal="http://www.infrae.com/silva/notal"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  tal:define="    
    model request/model;
    publication model;
    tree publication/get_container_tree;
    publication_url string:${publication/absolute_url}/edit/{__vein_id__};
">

<tr tal:replace="nothing"> 
  ______________ sidebar publication row ______________ 
</tr>
<tr>
  <td class="{__class__}"
    style="padding-left: 0;">
    <a href="top"
      title="up to top contents of publication"
      tal:attributes="href string:${publication/absolute_url}/edit/tab_edit">
      <img tal:replace="structure python:here.render_icon(model.get_publication())" />
    </a>
    <a class="blacklink"
      href="top"
      title="up to top of publication"
      tal:attributes="href publication_url"
      tal:content="python: publication.get_short_title_editable() == '' and publication.id or publication.get_short_title_editable()">
      Publication
    </a>
  </td>
</tr>

<span tal:replace="nothing">
  ______________ sidebar iteration ______________
</span>

<tal:block repeat="indent_item tree">
  <tr tal:define="
    item python:indent_item[1];
    indent python:indent_item[0];
    oddrow repeat/indent_item/odd;">
    <td class="{__class__}"
      tal:define="
        item_url string:${item/absolute_url};
        title item/get_short_title_editable">
      <div tal:attributes="style python:'margin-left:'+str(indent * 10)+'px'">
        <a title="contents"
          tal:attributes="href string:${item_url}/edit/tab_edit">
          <img tal:replace="structure python:here.render_icon(item)" />
        </a>
        <a class="blacklink"
          tal:attributes="
            href string:${item_url}/edit/{__vein_id__};
            title string:id: ${item/id};"
          tal:content="title">
          title
        </a>
        <a class="blacklink"
          tal:attributes="
            href string:${item_url}/edit/{__vein_id__};
            title string:id: ${item/id};"
          tal:condition="python:title == ''"
          tal:content="item/id">
          no title
        </a>
      </div>
    </td>
  </tr>
  <tr class="controls"
    tal:condition="repeat/indent_item/end">
    <td>
    </td>
  </tr>
</tal:block>

</html>
